(function(){"use strict";const t={totalAdSpend:document.getElementById("totalAdSpend"),totalAdRevenue_fromAds:document.getElementById("totalAdRevenue_fromAds"),averageProductProfitMargin_percent:document.getElementById("averageProductProfitMargin_percent"),adv_averageProductProfitMargin_percent:document.getElementById("adv_averageProductProfitMargin_percent"),adv_totalAdRevenue_fromAds:document.getElementById("adv_totalAdRevenue_fromAds"),adv_totalAdSpend:document.getElementById("adv_totalAdSpend"),adImpressions:document.getElementById("adImpressions"),adClicks:document.getElementById("adClicks"),adOrders:document.getElementById("adOrders"),dailyAdBudget:document.getElementById("dailyAdBudget"),performancePeriodDropdown:document.getElementById("performancePeriodDropdown"),currencySymbol:document.getElementById("currencySymbol"),totalOverallShopRevenue:document.getElementById("totalOverallShopRevenue"),totalOverallShopOrders:document.getElementById("totalOverallShopOrders"),totalShopVisits:document.getElementById("totalShopVisits"),roasStatValue:document.getElementById("roasStatValue"),breakevenRoasStatValue:document.getElementById("breakevenRoasStatValue"),netAdProfitStatValue:document.getElementById("netAdProfitStatValue"),profitabilityStatusBadge:document.getElementById("profitabilityStatusBadge"),profitabilityMessageCard:document.getElementById("profitabilityMessageCard"),profitabilityMessageTitle:document.getElementById("profitabilityMessageTitle"),profitabilityMessageText:document.getElementById("profitabilityMessageText"),toggleNormalViewButton:document.getElementById("toggleNormalViewButton"),toggleAdvancedViewButton:document.getElementById("toggleAdvancedViewButton"),normalInputsContainer:document.getElementById("normalInputsContainer"),advancedInputsContainer:document.getElementById("advancedInputsContainer"),advertisingAnalysisSectionWrapper:document.getElementById("advertisingAnalysisSectionWrapper"),organicVsAdComparisonSectionWrapper:document.getElementById("organicVsAdComparisonSectionWrapper"),budgetUtilizationSectionWrapper:document.getElementById("budgetUtilizationSectionWrapper"),budgetUtilizationText:document.getElementById("budgetUtilizationText"),budgetUtilizationProgressBarFill:document.getElementById("budgetUtilizationProgressFill"),budgetUtilizationPercentageOnBar:document.getElementById("budgetUtilizationPercentageOnBar"),recommendationsSection:document.getElementById("recommendationsSection"),recommendationsEmptyState:document.getElementById("recommendationsEmptyState"),recommendationOutputArea:document.getElementById("recommendationOutputArea"),categoryFilters:document.getElementById("categoryFilters"),recommendationsListContainer:document.getElementById("recommendationsListContainer"),adAnalysisTabButtons:document.querySelectorAll(".a--ad-analysis-tab-button"),adAnalysisTabContents:document.querySelectorAll(".a--ad-analysis-tab-content"),comparisonMetricsTabButtons:document.querySelectorAll(".a--comparison-tab-button"),comparisonMetricsTabContents:document.querySelectorAll(".a--comparison-tab-content"),exportCsvButton:document.getElementById("exportCsvButton"),aa_performancePeriod:document.getElementById("aa_performancePeriod"),aa_totalAdSpend_sum:document.getElementById("aa_totalAdSpend_sum"),aa_totalAdRevenue_sum:document.getElementById("aa_totalAdRevenue_sum"),aa_adOrders_sum:document.getElementById("aa_adOrders_sum"),aa_netAdProfit_sum:document.getElementById("aa_netAdProfit_sum"),aa_ROAS_kpr:document.getElementById("aa_ROAS_kpr"),aa_ACOS_kpr:document.getElementById("aa_ACOS_kpr"),aa_CVR_kpr:document.getElementById("aa_CVR_kpr"),aa_CPA_kpr:document.getElementById("aa_CPA_kpr"),aa_totalAdRevenue_prof:document.getElementById("aa_totalAdRevenue_prof"),aa_totalAdSpend_prof:document.getElementById("aa_totalAdSpend_prof"),aa_COGS_prof:document.getElementById("aa_COGS_prof"),aa_totalCosts_prof:document.getElementById("aa_totalCosts_prof"),aa_netProfit_prof:document.getElementById("aa_netProfit_prof"),aa_netProfitMargin_prof:document.getElementById("aa_netProfitMargin_prof"),aa_profitStatus_prof:document.getElementById("aa_profitStatus_prof"),aa_ROAS_prof:document.getElementById("aa_ROAS_prof"),aa_breakevenROAS_prof:document.getElementById("aa_breakevenROAS_prof"),aa_ACOS_prof:document.getElementById("aa_ACOS_prof"),aa_breakevenACOS_prof:document.getElementById("aa_breakevenACOS_prof"),aa_adImpressions_eng:document.getElementById("aa_adImpressions_eng"),aa_adClicks_eng:document.getElementById("aa_adClicks_eng"),aa_CTR_eng:document.getElementById("aa_CTR_eng"),aa_totalAdSpend_eng:document.getElementById("aa_totalAdSpend_eng"),aa_CPC_eng:document.getElementById("aa_CPC_eng"),aa_CPM_eng:document.getElementById("aa_CPM_eng"),aa_RPC_eng:document.getElementById("aa_RPC_eng"),aa_PPC_eng:document.getElementById("aa_PPC_eng"),aa_adOrders_eng:document.getElementById("aa_adOrders_eng"),aa_CVR_eng:document.getElementById("aa_CVR_eng"),aa_AOV_eng:document.getElementById("aa_AOV_eng"),aa_CPA_eng:document.getElementById("aa_CPA_eng"),aa_profitPerSale_eng:document.getElementById("aa_profitPerSale_eng"),co_blendedROAS:document.getElementById("co_blendedROAS"),co_overallShopNetProfitLoss:document.getElementById("co_overallShopNetProfitLoss"),co_TACoS_percent:document.getElementById("co_TACoS_percent"),co_percentRevenueFromAds:document.getElementById("co_percentRevenueFromAds"),co_percentOrdersFromAds:document.getElementById("co_percentOrdersFromAds"),co_combinedConversionRate:document.getElementById("co_combinedConversionRate"),co_combinedAOV:document.getElementById("co_combinedAOV"),co_adSpendToOverallGrossProfitRatio_percent:document.getElementById("co_adSpendToOverallGrossProfitRatio_percent"),cdt_ad_visits:document.getElementById("cdt_ad_visits"),cdt_organic_visits:document.getElementById("cdt_organic_visits"),cdt_total_visits:document.getElementById("cdt_total_visits"),cdt_ad_orders:document.getElementById("cdt_ad_orders"),cdt_organic_orders:document.getElementById("cdt_organic_orders"),cdt_total_orders:document.getElementById("cdt_total_orders"),cdt_ad_cvr:document.getElementById("cdt_ad_cvr"),cdt_organic_cvr:document.getElementById("cdt_organic_cvr"),cdt_total_cvr:document.getElementById("cdt_total_cvr"),cdt_ad_revenue:document.getElementById("cdt_ad_revenue"),cdt_organic_revenue:document.getElementById("cdt_organic_revenue"),cdt_total_revenue:document.getElementById("cdt_total_revenue"),cdt_ad_aov:document.getElementById("cdt_ad_aov"),cdt_organic_aov:document.getElementById("cdt_organic_aov"),cdt_total_aov:document.getElementById("cdt_total_aov"),cdt_ad_revenuePercent:document.getElementById("cdt_ad_revenuePercent"),cdt_organic_revenuePercent:document.getElementById("cdt_organic_revenuePercent"),cdt_ad_ordersPercent:document.getElementById("cdt_ad_ordersPercent"),cdt_organic_ordersPercent:document.getElementById("cdt_organic_ordersPercent")};let L={},F={},D="normal",$="View all",N=new Set;function ee(e){L=e}function te(){return L}function ae(e){F=e}function oe(){return F}function re(e){D=e}function W(){return D}function ne(e){$=e}function ie(){return $}function se(e){N.add(e)}function de(){return N}const h=e=>({USD:"$",EUR:"€",GBP:"£",AUD:"A$",CAD:"C$",DKK:"kr.",HKD:"HK$",INR:"₹",IDR:"Rp",ILS:"₪",JPY:"¥",MYR:"RM",MXN:"MX$",MAD:"د.م.",NZD:"NZ$",NOK:"kr",PHP:"₱",SGD:"S$",ZAR:"R",SEK:"kr",CHF:"CHF",THB:"฿",TRY:"₺",UAH:"₴",VND:"₫"})[e]||e,g=(e,a="USD",o=!1,r=!1)=>{if(isNaN(e)||e===null||!isFinite(e))return r?"":"-";const n=Number(e);if(r)return n.toFixed(2);try{let s=new Intl.NumberFormat(void 0,{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(n);return o&&n>0?`+${s}`:s}catch(d){console.warn("Currency formatting error for code:",a,"- using basic formatting. Error:",d);const s=n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});let l=h(a);const i=["Rp","د.م.","₫","₴","MAD"],c=["DKK","NOK","SEK","CHF","MYR","ZAR","IDR"];let u;return i.includes(a)||typeof l=="string"&&i.includes(l)?u=`${s} ${l}`:c.includes(a)||typeof l=="string"&&c.includes(l)?u=`${l} ${s}`:u=`${l}${s}`,o&&n>0?`+${u}`:u}},_=(e,a=!1)=>isNaN(e)||e===null||!isFinite(e)?a?"":"-":a?Number(e).toFixed(2):`${Number(e).toFixed(2)}%`,m=(e,a=2,o=!1,r="")=>{if(isNaN(e)||e===null||!isFinite(e))return o?"":"-";let n=Number(e).toFixed(a);return o?n:`${n}${r}`},v=(e,a=!1)=>isNaN(e)||e===null||!isFinite(e)?a?"":"-":a?Number(e).toFixed(0):Number(e).toLocaleString("en-US");function le(e,a){let o;return function(...r){clearTimeout(o),o=setTimeout(()=>{e.apply(this,r)},a)}}function ce(e){const a=new Date,o=a.getFullYear(),r=a.getMonth(),n=a.getDate();switch(e){case"today":return 1;case"yesterday":return 1;case"this_month":return n;case"last_month":return new Date(o,r,0).getDate();case"last_30_days":return 30;case"this_year":const d=new Date(o,0,1),s=a.getTime()-d.getTime();return Math.floor(s/(1e3*60*60*24))+1;case"all_time":return 731;default:return console.warn(`Unknown period: ${e}, defaulting to 30 days.`),30}}function ue(e){re(e)}function ge(){const e=t.performancePeriodDropdown.value,a=W();let o=parseFloat(t.totalAdSpend.value)||0,r=parseFloat(t.totalAdRevenue_fromAds.value)||0,n=parseFloat(t.averageProductProfitMargin_percent.value)||0;a==="advanced"&&(t.adv_totalAdSpend&&t.adv_totalAdSpend.value.trim()!==""&&(o=parseFloat(t.adv_totalAdSpend.value)||0),t.adv_totalAdRevenue_fromAds&&t.adv_totalAdRevenue_fromAds.value.trim()!==""&&(r=parseFloat(t.adv_totalAdRevenue_fromAds.value)||0),t.adv_averageProductProfitMargin_percent&&t.adv_averageProductProfitMargin_percent.value.trim()!==""&&(n=parseFloat(t.adv_averageProductProfitMargin_percent.value)||0));const d={totalAdSpend:o,totalAdRevenue_fromAds:r,averageProductProfitMargin_percent:n,adImpressions:parseInt(t.adImpressions.value)||0,adClicks:parseInt(t.adClicks.value)||0,adOrders:parseInt(t.adOrders.value)||0,dailyAdBudget:parseFloat(t.dailyAdBudget.value)||0,performancePeriod_days:ce(e),selectedPeriodString:e,currencyCode:t.currencySymbol.value||"USD",totalOverallShopRevenue:parseFloat(t.totalOverallShopRevenue.value)||0,totalOverallShopOrders:parseInt(t.totalOverallShopOrders.value)||0,totalShopVisits:parseInt(t.totalShopVisits.value)||0,isAdvancedDataAvailable:a==="advanced"&&((parseInt(t.adImpressions.value)||0)>0||(parseInt(t.adClicks.value)||0)>0||(parseInt(t.adOrders.value)||0)>0)};return ee(d),d}function pe(){t.adv_totalAdSpend&&t.totalAdSpend&&(t.adv_totalAdSpend.value=t.totalAdSpend.value),t.adv_totalAdRevenue_fromAds&&t.totalAdRevenue_fromAds&&(t.adv_totalAdRevenue_fromAds.value=t.totalAdRevenue_fromAds.value),t.adv_averageProductProfitMargin_percent&&t.averageProductProfitMargin_percent&&(t.adv_averageProductProfitMargin_percent.value=t.averageProductProfitMargin_percent.value)}function me(){[{normalId:"totalAdSpend",advancedId:"adv_totalAdSpend"},{normalId:"totalAdRevenue_fromAds",advancedId:"adv_totalAdRevenue_fromAds"},{normalId:"averageProductProfitMargin_percent",advancedId:"adv_averageProductProfitMargin_percent"}].forEach(a=>{const o=t[a.normalId],r=t[a.advancedId];o&&r?(o.addEventListener("input",function(){r.value!==this.value&&(r.value=this.value)}),r.addEventListener("input",function(){o.value!==this.value&&(o.value=this.value)})):(o||console.error(`Error: Input field with ID '${a.normalId}' not found in DOMElements for synchronization.`),r||console.error(`Error: Input field with ID '${a.advancedId}' not found in DOMElements for synchronization.`))})}function fe(e){const a={},o=e.averageProductProfitMargin_percent/100,r=e.adOrders>0?e.totalAdRevenue_fromAds/e.adOrders:0,n=e.totalAdSpend>0?e.totalAdRevenue_fromAds/e.totalAdSpend:0,d=e.totalAdRevenue_fromAds>0?e.totalAdSpend/e.totalAdRevenue_fromAds*100:0,s=e.adOrders>0?e.totalAdSpend/e.adOrders:0,l=e.adClicks>0?e.adOrders/e.adClicks*100:0,c=e.totalAdRevenue_fromAds*o-e.totalAdSpend,u=e.totalAdRevenue_fromAds*(1-o),p=u+e.totalAdSpend,f=e.totalAdRevenue_fromAds>0?c/e.totalAdRevenue_fromAds*100:0;let y="Breakeven";c>.005?y="Profitable":c<-.005&&(y="Unprofitable");const E=o>0?1/o:1/0,P=e.averageProductProfitMargin_percent,O=e.adOrders>0?c/e.adOrders:0,T=e.adImpressions>0?e.adClicks/e.adImpressions*100:0,Le=e.adClicks>0?e.totalAdSpend/e.adClicks:0,Fe=e.adImpressions>0?e.totalAdSpend/e.adImpressions*1e3:0,De=e.adClicks>0?e.totalAdRevenue_fromAds/e.adClicks:0,$e=e.adClicks>0?c/e.adClicks:0;a.aa_performancePeriod=e.performancePeriod_days,a.aa_selectedPeriodString=e.selectedPeriodString,a.aa_totalAdSpend_sum=e.totalAdSpend,a.aa_totalAdRevenue_sum=e.totalAdRevenue_fromAds,a.aa_adOrders_sum=e.adOrders,a.aa_netAdProfit_sum=c,a.aa_ROAS_kpr=n,a.aa_ACOS_kpr=d,a.aa_CVR_kpr=l,a.aa_CPA_kpr=s,a.aa_totalAdRevenue_prof=e.totalAdRevenue_fromAds,a.aa_totalAdSpend_prof=e.totalAdSpend,a.aa_COGS_prof=u,a.aa_totalCosts_prof=p,a.aa_netProfit_prof=c,a.aa_netProfitMargin_prof=f,a.aa_profitStatus_prof=y,a.aa_ROAS_prof=n,a.aa_breakevenROAS_prof=E,a.aa_ACOS_prof=d,a.aa_breakevenACOS_prof=P,a.aa_adImpressions_eng=e.adImpressions,a.aa_adClicks_eng=e.adClicks,a.aa_CTR_eng=T,a.aa_totalAdSpend_eng=e.totalAdSpend,a.aa_CPC_eng=Le,a.aa_CPM_eng=Fe,a.aa_RPC_eng=De,a.aa_PPC_eng=$e,a.aa_adOrders_eng=e.adOrders,a.aa_CVR_eng=l,a.aa_AOV_eng=r,a.aa_CPA_eng=s,a.aa_profitPerSale_eng=O;const M=Math.max(0,e.totalOverallShopRevenue-e.totalAdRevenue_fromAds),S=Math.max(0,e.totalOverallShopOrders-e.adOrders),V=Math.max(0,e.totalShopVisits-e.adClicks),X=V>0?S/V*100:0,Q=S>0?M/S:0,Ne=e.totalOverallShopRevenue*o-e.totalAdSpend;return a.co_blendedROAS=e.totalAdSpend>0?e.totalOverallShopRevenue/e.totalAdSpend:0,a.co_overallShopNetProfitLoss=Ne,a.co_TACoS_percent=e.totalOverallShopRevenue>0?e.totalAdSpend/e.totalOverallShopRevenue*100:0,a.co_percentRevenueFromAds=e.totalOverallShopRevenue>0?e.totalAdRevenue_fromAds/e.totalOverallShopRevenue*100:0,a.co_percentOrdersFromAds=e.totalOverallShopOrders>0?e.adOrders/e.totalOverallShopOrders*100:0,a.co_organicCVR_forOverview=X,a.co_adCVR_forOverview=l,a.co_organicAOV_forOverview=Q,a.co_adAOV_forOverview=r,a.cdt_ad_visits=e.adClicks,a.cdt_ad_orders=e.adOrders,a.cdt_ad_cvr=l,a.cdt_ad_revenue=e.totalAdRevenue_fromAds,a.cdt_ad_aov=r,a.cdt_ad_revenuePercent=a.co_percentRevenueFromAds,a.cdt_ad_ordersPercent=a.co_percentOrdersFromAds,a.cdt_organic_visits=V,a.cdt_organic_orders=S,a.cdt_organic_cvr=X,a.cdt_organic_revenue=M,a.cdt_organic_aov=Q,a.cdt_organic_revenuePercent=e.totalOverallShopRevenue>0?M/e.totalOverallShopRevenue*100:0,a.cdt_organic_ordersPercent=e.totalOverallShopOrders>0?S/e.totalOverallShopOrders*100:0,a.cdt_total_visits=e.totalShopVisits,a.cdt_total_orders=e.totalOverallShopOrders,a.cdt_total_cvr=e.totalShopVisits>0?e.totalOverallShopOrders/e.totalShopVisits*100:0,a.cdt_total_revenue=e.totalOverallShopRevenue,a.cdt_total_aov=e.totalOverallShopOrders>0?e.totalOverallShopRevenue/e.totalOverallShopOrders:0,a.m_budget_totalBudgetedForPeriod=e.dailyAdBudget*e.performancePeriod_days,a.m_budget_utilization_percent=a.m_budget_totalBudgetedForPeriod>0?e.totalAdSpend/a.m_budget_totalBudgetedForPeriod*100:0,ae(a),a}const I={profitable:{title:"Your Ads Appear Profitable!",description:"Great news! Based on your inputs, for every {currencySymbol}1 you've spent on ads, you're getting back approximately {formattedRoasValueInCurrency}. Your estimated Return on Ad Spend (ROAS) is {roas}x, which is above your breakeven ROAS of {breakevenRoas}x. This has resulted in an estimated net profit of {formattedNetProfit} for this period. Keep up the good work!"},breakeven:{title:"Your Ads Are Around Breakeven",description:"Based on your core inputs, your ads are covering their costs. For every {currencySymbol}1 spent on ads, you're getting back approximately {formattedRoasValueInCurrency}. Your estimated Return on Ad Spend (ROAS) of {roas}x is very close to your breakeven ROAS of {breakevenRoas}x, resulting in an estimated net financial impact of approximately {formattedNetResult} for this period. While not generating significant profit yet, these ads are helping maintain sales activity."},unprofitable:{title:"Your Ads Are Unprofitable",description:"Based on your inputs, it appears your ads might be operating at a loss. For every {currencySymbol}1 spent on ads, you're getting back approximately {formattedRoasValueInCurrency}. Your estimated Return on Ad Spend (ROAS) is {roas}x, which is below your breakeven ROAS of {breakevenRoas}x. This has led to an estimated net loss of {formattedNetLoss} for this period."}},A={slightlyProfitable:{title:"Ads are Barely Profitable",description:"Good progress! Your ads are generating positive returns with a ROAS of {roas}x. Every {currencySymbol}1 spent on advertising brings back {formattedRoasValueInCurrency} in sales. This beats your breakeven target of {breakevenRoas}x by {percentageAboveBreakeven}%, putting you in profitable territory. After covering all advertising costs, your campaigns delivered {formattedNetProfit} net profit this period from {adOrders} orders. You're on the right track, focus on optimizing these campaigns before scaling further. {budgetInsight}",minRequirements:{profit:25,orders:3,spend:75,days:3},roasMultiplier:{min:1.1,max:1.5}},mediumProfitable:{title:"Ads are Profitable!",description:"Excellent results! Your ads are generating strong returns with a ROAS of {roas}x. Every {currencySymbol}1 spent on advertising brings back {formattedRoasValueInCurrency} in sales. This crushes your breakeven target of {breakevenRoas}x by {percentageAboveBreakeven}%! After covering all advertising costs, your campaigns delivered a solid {formattedNetProfit} net profit this period from {adOrders} orders. Your ad strategy is working. {budgetInsight}",minRequirements:{profit:75,orders:5,spend:200,days:5},roasMultiplier:{min:1.5,max:2.5}},highlyProfitable:{title:"Ads are Crushing It!",description:"Outstanding performance! Your ads are delivering exceptional returns with a ROAS of {roas}x. Every {currencySymbol}1 spent on advertising brings back {formattedRoasValueInCurrency} in sales. This absolutely dominates your breakeven target of {breakevenRoas}x by {percentageAboveBreakeven}%! After covering all advertising costs, your campaigns generated an impressive {formattedNetProfit} net profit this period from {adOrders} orders. You've struck gold! {budgetInsight_highlyProfitable}",minRequirements:{profit:200,orders:10,spend:400,days:7},roasMultiplier:{min:2.5,max:1/0}},earlyProfitable:{title:"Ads Show Promise",description:"Early positive signs! Your ads are generating a ROAS of {roas}x, which beats your breakeven target of {breakevenRoas}x by {percentageAboveBreakeven}%. For every {currencySymbol}1 spent, you're getting back {formattedRoasValueInCurrency}. While you've only generated {formattedNetProfit} net profit from {adOrders} orders so far, this performance suggests your campaigns have potential. Continue monitoring for a few more days to confirm this trend before making major budget changes. {budgetInsight_early}",condition:"Good ROAS but doesn't meet minimum thresholds for other profitable tiers"}},b={perfectBreakeven:{title:"Ads Breaking Even",description:"Your current Return on Ad Spend is {roas}x, which is right at your breakeven target of {breakevenRoas}x. With essentially {formattedNetResult} net result this period from {adOrders} orders, your ads are covering their costs. For every {currencySymbol}1 spent, you're getting back {formattedRoasValueInCurrency}. While not generating direct profit, these campaigns are driving valuable sales velocity that can boost your Etsy search rankings organically. Small optimizations could push you into profitable territory. {budgetInsight_breakeven}",minRequirements:{maxAbsResult:25,minSpend:75,minDays:3},roasRange:{min:.95,max:1.05}},slightlyPositiveBreakeven:{title:"Ads Nearly Breaking Even (Slight Profit)",description:"Your current Return on Ad Spend is {roas}x, just above your breakeven target of {breakevenRoas}x by {percentageAboveBreakeven}%. With {formattedNetResult} net profit this period from {adOrders} orders, you're in minimal profit territory. For every {currencySymbol}1 spent, you're getting back {formattedRoasValueInCurrency}. These campaigns are covering costs while generating sales velocity. Focus on small optimizations to improve margins. {budgetInsight_breakeven}",minRequirements:{minResult:10,maxResult:75,minSpend:100,minDays:3},roasRange:{min:1.01,max:1.15}},slightlyNegativeBreakeven:{title:"Ads Nearly Breaking Even (Slight Loss)",description:"Your current Return on Ad Spend is {roas}x, just below your breakeven target of {breakevenRoas}x by {percentageBelowBreakeven}%. With {formattedNetResult} net loss this period from {adOrders} orders, you're very close to covering costs. For every {currencySymbol}1 spent, you're getting back {formattedRoasValueInCurrency}. While not profitable yet, these campaigns are generating sales velocity. Small optimizations should push you into profit. {budgetInsight_breakeven}",minRequirements:{minLoss:10,maxLoss:75,minSpend:100,minDays:3},roasRange:{min:.85,max:.99}},minimalBreakeven:{title:"Early Breakeven Results",description:"Your current Return on Ad Spend is {roas}x, which is close to your breakeven target of {breakevenRoas}x. For every {currencySymbol}1 spent, you're getting back {formattedRoasValueInCurrency}. With minimal financial impact so far ({formattedNetResult} from {adOrders} orders this period), it's still early to draw firm conclusions. These campaigns are generating sales velocity. Continue monitoring while making small optimizations. {budgetInsight_breakeven}",condition:"Close to breakeven but limited data or very small financial impact"}},C={earlyUnprofitable:{title:"Ads in Learning Phase (Loss)",description:"Your current Return on Ad Spend is {roas}x. For every {currencySymbol}1 invested in ads, your campaigns brought back {formattedRoasValueInCurrency} in revenue. This is below the {breakevenRoas}x ROAS needed to break even, resulting in a {formattedNetLoss} net loss this period from {adOrders} orders. Since you're in early testing with modest losses, these campaigns are still generating valuable sales velocity. Review recommendations for optimization. {budgetInsight_unprofitable}",minRequirements:{maxLoss:100,minSpend:50,maxDays:14},roasRange:{min:.6,max:1.1}},slightlyUnprofitable:{title:"Ads Slightly Unprofitable",description:"Your current Return on Ad Spend is {roas}x. For every {currencySymbol}1 invested in ads, your campaigns brought back {formattedRoasValueInCurrency} in revenue. This is just below the {breakevenRoas}x ROAS needed to break even, resulting in a {formattedNetLoss} net loss this period from {adOrders} orders. While not profitable yet, your ads are driving sales velocity. You're close to profitability. {budgetInsight_unprofitable}",minRequirements:{minLoss:50,maxLoss:300,minSpend:100},roasRange:{min:.85,max:1.1}},moderatelyUnprofitable:{title:"Ads Need Optimization (Unprofitable)",description:"Your current Return on Ad Spend is {roas}x. For every {currencySymbol}1 invested in ads, your campaigns brought back only {formattedRoasValueInCurrency} in revenue. This is below the {breakevenRoas}x ROAS needed to break even, resulting in a {formattedNetLoss} net loss this period from {adOrders} orders. Your ads are spending more than they're earning, but this is fixable. {budgetInsight_unprofitable}",minRequirements:{minLoss:100,maxLoss:1e3,minSpend:200},roasRange:{min:.5,max:.85}},severelyUnprofitable:{title:"Ads Losing Significant Money",description:"Your current Return on Ad Spend is {roas}x. For every {currencySymbol}1 invested in ads, your campaigns brought back only {formattedRoasValueInCurrency} in revenue. This is far below the {breakevenRoas}x ROAS needed to break even, resulting in a {formattedNetLoss} net loss this period from {adOrders} orders. These results suggest fundamental issues. {budgetInsight_unprofitable_severe}",minRequirements:{minLoss:300,minSpend:500},roasRange:{min:0,max:.6}},minimalUnprofitable:{title:"Early Testing Results (Loss)",description:"Your current Return on Ad Spend is {roas}x, which is below the {breakevenRoas}x needed to break even, resulting in a {formattedNetLoss} net loss this period from {adOrders} orders. For every {currencySymbol}1 spent, you're getting back {formattedRoasValueInCurrency}. With limited data so far, it's too early to draw firm conclusions. Continue testing. {budgetInsight_unprofitable}",condition:"Small losses or very limited data, not fitting other unprofitable tiers"}};function w(e,a,o,r,n=!1){if(a===0)return o>0?"Daily budget is currently 0. If you are running ads, setting a daily budget helps track utilization and control spend.":"Daily budget not set. Add a daily budget if you plan to run ads to track utilization.";const d=m(e,0);return n?e<80?`Your campaigns are using ${d}% of your budget. Since performance is excellent, consider if you can advertise more listings or refine targeting to help utilize your budget more fully on this profitable traffic.`:`Your campaigns are efficiently using ${d}% of your budget. To scale these fantastic results, you could consider a cautious budget increase.`:r?e<80?`Your campaigns are using ${d}% of your budget. With good performance, explore advertising more listings or ensuring your current ones have broad enough appeal to utilize more of the budget.`:`Your campaigns are using ${d}% of your budget. You could consider a gradual budget increase to capture more sales.`:e>80?`Your campaigns are using ${d}% of your budget. Focus on improving ROAS and core metrics before increasing spend. You might consider reducing the budget while optimizing to limit potential losses.`:`Your campaigns are using ${d}% of your budget. Prioritize optimizing campaign performance to improve profitability before considering budget changes.`}function _e(e,a,o,r,n,d){if(a===0||!isFinite(a))return"earlyProfitable";const s=e/a,l=A.highlyProfitable;if(s>=l.roasMultiplier.min&&o>=l.minRequirements.profit&&r>=l.minRequirements.orders&&n>=l.minRequirements.spend&&d>=l.minRequirements.days)return"highlyProfitable";const i=A.mediumProfitable;if(s>=i.roasMultiplier.min&&s<l.roasMultiplier.min&&o>=i.minRequirements.profit&&r>=i.minRequirements.orders&&n>=i.minRequirements.spend&&d>=i.minRequirements.days)return"mediumProfitable";const c=A.slightlyProfitable;return s>=c.roasMultiplier.min&&s<i.roasMultiplier.min&&o>=c.minRequirements.profit&&r>=c.minRequirements.orders&&n>=c.minRequirements.spend&&d>=c.minRequirements.days?"slightlyProfitable":o>.005?"earlyProfitable":null}function ve(e,a,o,r,n,d){const s=Math.abs(o),l=b.perfectBreakeven;if(e>=l.roasRange.min&&e<=l.roasRange.max&&s<=l.minRequirements.maxAbsResult&&r>=l.minRequirements.minSpend&&n>=l.minRequirements.minDays)return"perfectBreakeven";const i=b.slightlyPositiveBreakeven;if(e>=i.roasRange.min&&e<=i.roasRange.max&&o>=i.minRequirements.minResult&&o<=i.minRequirements.maxResult&&r>=i.minRequirements.minSpend&&n>=i.minRequirements.minDays)return"slightlyPositiveBreakeven";const c=b.slightlyNegativeBreakeven;return e>=c.roasRange.min&&e<=c.roasRange.max&&o<0&&s>=c.minRequirements.minLoss&&s<=c.minRequirements.maxLoss&&r>=c.minRequirements.minSpend&&n>=c.minRequirements.minDays?"slightlyNegativeBreakeven":e>=.85&&e<1.15&&s<50?"minimalBreakeven":null}function ye(e,a,o,r,n,d){if(o>=-.005)return null;const s=C.severelyUnprofitable;if(e>=s.roasRange.min&&e<s.roasRange.max&&Math.abs(o)>=s.minRequirements.minLoss&&r>=s.minRequirements.minSpend)return"severelyUnprofitable";const l=C.moderatelyUnprofitable;if(e>=l.roasRange.min&&e<l.roasRange.max&&Math.abs(o)>=l.minRequirements.minLoss&&Math.abs(o)<=l.minRequirements.maxLoss&&r>=l.minRequirements.minSpend)return"moderatelyUnprofitable";const i=C.slightlyUnprofitable;if(e>=i.roasRange.min&&e<i.roasRange.max&&Math.abs(o)>=i.minRequirements.minLoss&&Math.abs(o)<=i.minRequirements.maxLoss&&r>=i.minRequirements.minSpend)return"slightlyUnprofitable";const c=C.earlyUnprofitable;return e>=c.roasRange.min&&e<c.roasRange.max&&Math.abs(o)<=c.minRequirements.maxLoss&&r>=c.minRequirements.minSpend&&n<=c.minRequirements.maxDays?"earlyUnprofitable":"minimalUnprofitable"}function B(e,a){if(!e||!a)return"unknown";const o=e.aa_netAdProfit_sum,r=e.aa_ROAS_kpr,n=e.aa_breakevenROAS_prof;return r!==void 0&&n!==void 0&&n>0&&r<n*.6&&a.totalAdSpend>50&&a.performancePeriod_days>=7?"severelyUnprofitable":o!==void 0&&o>.005?"profitable":o!==void 0&&o<-.005?"unprofitable":o!==void 0?"breakeven":"unknown"}const he=[{id:"diveDeeperWithAdvancedMetrics",icon:{name:"magnifying-glass",style:"outline"},iconBgColor:"#475569",category:"Strategy & Insights",priority:100,noDismiss:!1,badgeText:"Deeper Insights",title:"Unlock Advanced Recommendations",descriptionFunction:(e,a)=>"You're viewing a summary based on core inputs. For more tailored recommendations and a complete understanding of your ad performance (like Click-Through Rate, Conversion Rate, and Cost Per Click), switch to 'Advanced View' and provide detailed ad data.",action:{label:"Switch to Advanced View",type:"function_call",target:"toggleAdvancedView"},condition:(e,a,o)=>o==="normal"},{id:"optimizeAdvertisedListingsWithAlura",icon:{name:"sparkles",style:"outline"},iconBgColor:"#4B5563",category:"Ad Performance",priority:90,noDismiss:!1,badgeText:"Increase ROAS",title:"Turn Off Underperforming Listings",descriptionFunction:(e,a)=>{const o=B(a,e);return o==="profitable"?"Your ads are generally performing well! To further boost your ROAS, use the Ads Optimizer to automatically identify and pause any individual listings that might be underperforming (e.g., low ROAS or high spend with few sales) within your successful campaigns. This ensures your budget is concentrated on the absolute top performers.":o==="breakeven"?"Some of your ads are just covering costs. The Ads Optimizer can help identify and pause listings that aren't quite hitting profitability or those spending without sales, freeing up budget for better performers.":"Improve your ad efficiency. The Ads Optimizer can automatically pause underperforming listings (e.g., those with high spend and no sales, or ROAS below breakeven) to redirect your budget towards what works and help refocus your strategy."},action:{label:"Use Ads Optimizer",type:"link",target:"https://app.alura.io/marketing/etsy-ads"},condition:(e,a)=>!0},{id:"optimizeAdBudgetToPerformance",icon:{name:"adjustments-horizontal",style:"outline"},iconBgColor:"#52525B",category:"Budget & Profit",priority:86,noDismiss:!1,badgeText:"Ad Spend Flow",title:"Adjust Your Ad Budget",descriptionFunction:(e,a)=>{const o=a.m_budget_utilization_percent,r=e.performancePeriod_days>0?e.totalAdSpend/e.performancePeriod_days:0,n=e.dailyAdBudget||0,d=e.currencySymbolPlaceholder||h(e.currencyCode)||"$",s=a.aa_ROAS_kpr,l=a.aa_breakevenROAS_prof;let i="breakeven";if(s!==void 0&&l!==void 0&&l>0?s>l*1.1?i="profitable":s<l*.9&&(i="unprofitable"):s!==void 0&&(l===0||l===void 0||!isFinite(l))&&s>0&&(i="profitable"),n===0&&e.totalAdSpend>0)return`You've spent ${d}${e.totalAdSpend.toFixed(2)} on ads, but your daily budget isn't set in Alura. To get precise budget utilization insights, please enter your Etsy daily ad budget.`;if(n===0)return"Enter your daily ad budget (as set on Etsy) to analyze how effectively your budget is being used.";const c=s!==void 0?s.toFixed(2)+"x":"N/A",u=`${d}${n.toFixed(2)}`,p=o!==void 0?o.toFixed(0)+"%":"N/A",f=`${d}${r.toFixed(2)}`;return o<70&&e.performancePeriod_days>3?i==="profitable"?`Your ads are profitable (ROAS: ${c}) but only using about ${p} of your ${u} daily budget. This is a missed sales opportunity! Consider advertising more well-optimized listings or ensuring current ones have broad appeal to help Etsy spend your budget on these winning ads.`:i==="unprofitable"?`Your ads are underperforming (ROAS: ${c}) and using about ${p} of your ${u} daily budget. While underspending limits current losses, your primary focus should be improving ad ROAS (optimizing listings, targeting) before attempting to increase spend.`:`Your ads are near breakeven (ROAS: ${c}), using about ${p} of your ${u} daily budget. Monitor closely: if ROAS improves, you'll want Etsy to spend more. If not, the current underspend is somewhat protective. Aim for consistent profitability first.`:o>115?i==="profitable"?`Great! Your ads are profitable (ROAS: ${c}) and Etsy is effectively spending slightly over your ${u} daily budget (approx. ${f}/day). Consider increasing your daily budget on Etsy to capture all available profitable sales.`:`Warning: Your ads are spending ${f}/day, exceeding your ${u} budget, but performance is poor (ROAS: ${c}). This accelerates losses. Urgently review your Etsy ad campaigns; consider reducing the budget or pausing ads with the lowest ROAS.`:i==="profitable"?`Your ads are profitable (ROAS: ${c}) and utilizing your budget well (approx. ${p} of ${u} daily). This is healthy. If consistently strong, you could test a small budget increase on Etsy for more sales.`:i==="unprofitable"?`Your ads are using your budget (approx. ${p} of ${u} daily) but are notably unprofitable (ROAS: ${c}). Focus on improving ROAS by optimizing listings or targeting. Spending your full budget on underperforming ads will reduce overall profit.`:`Your ads are spending well (approx. ${p} of ${u} daily) but are around breakeven (ROAS: ${c}). Prioritize optimizations to achieve clear profitability before considering any budget increases. Monitor which specific listings are performing best.`},action:{label:"Adjust Ads on Etsy",type:"link",target:"https://www.etsy.com/your/shops/me/advertising"},condition:(e,a,o)=>e.isAdvancedDataAvailable&&e.performancePeriod_days>1&&e.dailyAdBudget!==void 0},{id:"alertHighSpendZeroAdOrders",icon:{name:"exclamation-triangle",style:"solid"},iconBgColor:"#525252",category:"Budget & Profit",priority:96,noDismiss:!1,badgeText:"Sales Alert",title:"Ad Spend Without Sales",descriptionFunction:(e,a)=>{const o=e.currencySymbolPlaceholder||h(e.currencyCode)||"$",r=e.adClicks||0,n=(e.totalAdSpend||0).toFixed(2);return`You've spent ${o}${n} on ads, receiving ${r} clicks, but recorded zero orders directly from these ads. This requires immediate investigation. Review which listings are advertised, their pricing, shipping, photo quality, and overall content. Also, check the keyword relevance of your listing's tags and titles for items consuming the most ad spend, as mismatches can lead to costly, irrelevant clicks. It's advisable to review your Etsy Ads Dashboard now to identify which specific listings are spending without converting.`},action:{label:"Review Problem Ads",type:"link",target:"https://www.etsy.com/your/shops/me/advertising/listings"},condition:(e,a,o)=>e.isAdvancedDataAvailable&&e.totalAdSpend>100&&e.adOrders===0&&e.adClicks>10},{id:"analyzeTACOSAndSalesVelocity",icon:{name:"receipt-percent",style:"outline"},iconBgColor:"#57534E",category:"Strategy & Insights",priority:80,noDismiss:!1,badgeText:"Shop Profit Health",title:"Check Your Overall Shop Profit",descriptionFunction:(e,a)=>{const o=a.co_TACoS_percent!==void 0?a.co_TACoS_percent.toFixed(2):"N/A",r=a.co_percentRevenueFromAds!==void 0?a.co_percentRevenueFromAds.toFixed(1):"N/A",n=e.averageProductProfitMargin_percent||0,d=e.currencySymbolPlaceholder||h(e.currencyCode)||"$";return o==="N/A"||r==="N/A"||!e.totalOverallShopRevenue||e.totalOverallShopRevenue===0?"To evaluate how your ads contribute to overall sales and shop velocity, please ensure your 'Shop Stats Data' (total shop visits, orders, revenue) is entered for the same performance period. This unlocks your Total Advertising Cost of Sale (TACoS) insight.":`Ads drive ${r}% of your sales, and your TACoS (Total Ad Cost of Sale) is ${o}%. This ${o}% is your ad investment per ${d}100 of total shop revenue. Crucially, for overall shop profitability, this TACoS should be comfortably below your average ${n}% profit margin. Achieving this balance also typically boosts sales velocity, which can aid your organic search ranking.`},action:{label:"Analyze Shop Stats",type:"link",target:"https://app.alura.io/analytics/financial-reports"},condition:(e,a,o)=>e.isAdvancedDataAvailable&&e.totalOverallShopRevenue>0&&e.totalOverallShopOrders>0&&e.totalShopVisits>0&&a.co_TACoS_percent!==void 0&&a.co_percentRevenueFromAds!==void 0},{id:"setAdequateTestBudget",icon:{name:"beaker",style:"outline"},iconBgColor:"#EA580C",category:"Budget & Profit",priority:84,noDismiss:!1,badgeText:"Effective Testing",title:"Set Adequate Budget for Ad Testing",descriptionFunction:(e,a)=>{const o=e.currencySymbolPlaceholder||h(e.currencyCode)||"$";return`Effective ad testing often requires a sufficient daily budget. If your current budget is very low (e.g., under ${o}5) and your ads aren't severely unprofitable, consider setting it to at least ${o}5 on Etsy. This gives your ads a better chance to gather enough data for performance evaluation and for Etsy's algorithm to optimize delivery.`},action:{label:"Manage Budget on Etsy",type:"link",target:"https://www.etsy.com/your/shops/me/advertising"},condition:(e,a)=>{const o=B(a,e);return e.dailyAdBudget>0&&e.dailyAdBudget<5&&o!=="severelyUnprofitable"}},{id:"considerPausingAds",icon:{name:"pause-circle",style:"solid"},iconBgColor:"#CA8A04",category:"Budget & Profit",priority:95,noDismiss:!1,badgeText:"Minimize Losses",title:"Review Unprofitable Ads",descriptionFunction:(e,a)=>`Your ads are significantly unprofitable with a ROAS of ${a.aa_ROAS_kpr!==void 0&&isFinite(a.aa_ROAS_kpr)?a.aa_ROAS_kpr.toFixed(2):"N/A"}x. If this trend has persisted for over 7-14 days with sufficient spend (e.g., > $50-$100), consider pausing all ads via your Etsy dashboard to prevent further losses while you thoroughly re-evaluate your strategy.`,action:{label:"Go to Etsy Ads to Pause",type:"link",target:"https://www.etsy.com/your/shops/me/advertising"},condition:(e,a)=>{const o=a.aa_ROAS_kpr,r=a.aa_breakevenROAS_prof;return e.isAdvancedDataAvailable&&o!==void 0&&r!==void 0&&r>0&&o<r*.6&&e.totalAdSpend>50&&e.performancePeriod_days>=7}},{id:"focusOnHighPotentialListings",icon:{name:"star",style:"solid"},iconBgColor:"#65A30D",category:"Ad Performance",priority:75,noDismiss:!1,badgeText:"Maximize Winners",title:"Prioritize Top Listings for Ads",descriptionFunction:(e,a)=>"Some of your listings naturally perform better or have higher optimization scores. Consider focusing more of your ad budget on these high-potential items first, as they are more likely to convert profitably. You can identify these through Listing Analytics.",action:{label:"View Listing Analytics",type:"link",target:"https://app.alura.io/analytics/listings?filter=top-sellers"},condition:(e,a,o)=>e.isAdvancedDataAvailable&&e.dailyAdBudget>0&&e.dailyAdBudget<20&&e.totalAdSpend>20},{id:"advertiseAllInitially",icon:{name:"light-bulb",style:"outline"},iconBgColor:"#16A34A",category:"Strategy & Insights",priority:78,noDismiss:!1,badgeText:"Discover Winners",title:"Test All Listings Initially",descriptionFunction:(e,a)=>"When starting with Etsy Ads, or if you've added many new products, consider advertising all (or most) of your listings with a modest budget (e.g., $5-$10/day). This allows you to gather data on which items perform best with ads, helping you discover unexpected winners before narrowing your focus.",action:{label:"Manage Advertised Listings on Etsy",type:"link",target:"https://www.etsy.com/your/shops/me/advertising/listings"},condition:(e,a,o)=>(!e.isAdvancedDataAvailable||o==="normal")&&(e.totalAdSpend<50&&e.performancePeriod_days<=30||e.dailyAdBudget>0&&e.dailyAdBudget<=5)},{id:"discoverNewAdKeywords",icon:{name:"key",style:"outline"},iconBgColor:"#059669",category:"Strategy & Insights",priority:68,noDismiss:!1,badgeText:"Expand Reach",title:"Find New Ad Keywords",descriptionFunction:(e,a)=>"Your Etsy Ads are only as good as your listing tags. Since tags determine where your ads appear, optimizing them is key. Use the Keyword Finder to discover high-demand, relevant terms that can significantly improve your ad targeting and attract more buyers.",action:{label:"Find Keywords",type:"link",target:"https://app.alura.io/keyword-finder"},condition:(e,a,o)=>e.isAdvancedDataAvailable},{id:"reviewProfitabilityPerProduct",icon:{name:"currency-dollar",style:"outline"},iconBgColor:"#0D9488",category:"Budget & Profit",priority:82,noDismiss:!1,badgeText:"Profit Check",title:"Know Your Product Profit",descriptionFunction:(e,a)=>"Not all products have the same profit margin. Before heavily advertising a listing, use the Profit Calculator to understand its true profitability after all fees and ad costs. This helps ensure your ads are actually making you money on each sale.",action:{label:"Calculate Product Profit",type:"link",target:"https://app.alura.io/resources/calculator"},condition:(e,a)=>{const o=B(a,e);return o==="breakeven"||e.isAdvancedDataAvailable&&(o==="profitable"||o==="unprofitable")}},{id:"addressLowAdCVR",icon:{name:"cursor-arrow-rays",style:"outline"},iconBgColor:"#0891B2",category:"Ad Performance",priority:88,noDismiss:!1,badgeText:"Boost Sales",title:"Improve Ad Conversion Rate",descriptionFunction:(e,a)=>{if(e.isAdvancedDataAvailable&&a.aa_CVR_kpr!==void 0){const o=a.aa_CVR_kpr.toFixed(2);if(a.aa_CVR_kpr<1&&e.adClicks>20)return`Your ad Conversion Rate (CVR) is ${o}%, which is quite low. This means people click your ads but aren't buying. Focus on optimizing your listing pages: improve photos, clarify descriptions, check pricing, and ensure shipping is competitive. A/B testing can help pinpoint what to change.`;if(a.aa_CVR_kpr<2.5&&e.adClicks>10)return`Your ad Conversion Rate (CVR) is ${o}%. There's room for improvement! Review your listing pages for areas to enhance buyer confidence, such as detailed descriptions, multiple high-quality images/video, and clear policies. Consider A/B testing different elements.`}return"Ensure your product pages are fully optimized to turn ad clicks into sales. High-quality photos, clear descriptions, competitive pricing, and reasonable shipping are key to improving your Conversion Rate."},action:{label:"A/B Test Listing Elements",type:"link",target:"https://app.alura.io/operations/ab-tests"},condition:(e,a,o)=>e.isAdvancedDataAvailable&&a.aa_CVR_kpr!==void 0&&e.adClicks>10&&a.aa_CVR_kpr<2.5},{id:"addVideosToBoostCTR",icon:{name:"video-camera",style:"outline"},iconBgColor:"#0284C7",category:"Ad Performance",priority:70,noDismiss:!1,badgeText:"Increase CTR",title:"Add Listing Videos",descriptionFunction:(e,a)=>{let o="Listings with videos can get up to 2x more sales on Etsy and tend to increase Click-Through Rates (CTR) as they auto-play on hover. ";if(e.isAdvancedDataAvailable&&a.aa_CTR_eng!==void 0){const r=a.aa_CTR_eng.toFixed(2);a.aa_CTR_eng<1?o=`Your current average ad Click-Through Rate (CTR) is ${r}%. Improving this can bring more potential buyers. Listings with videos often see higher engagement. `:o=`Your average ad Click-Through Rate (CTR) is ${r}%. To potentially boost this further, consider adding videos. `}return o+"Use the 1-click video generator to easily add videos to your advertised listings and enhance their appeal."},action:{label:"Create Listing Videos",type:"link",target:"https://app.alura.io/optimization/listings?filter=missing-video"},condition:(e,a)=>!0},{id:"abTestPrimaryImageForCTR",icon:{name:"photo",style:"outline"},iconBgColor:"#2563EB",category:"Ad Performance",priority:65,noDismiss:!1,badgeText:"Improve CTR",title:"A/B Test Primary Images",descriptionFunction:(e,a)=>{let o="Your primary image is crucial for attracting clicks. ";if(e.isAdvancedDataAvailable&&a.aa_CTR_eng!==void 0){const r=a.aa_CTR_eng.toFixed(2);o+=`Your current ad CTR is ${r}%. `}return o+="Use A/B Testing to experiment with different primary images for your key advertised listings to find out what captures more attention and boosts your CTR.",o},action:{label:"Start A/B Test",type:"link",target:"https://app.alura.io/operations/ab-tests"},condition:(e,a)=>!0},{id:"abTestPricingForCVR",icon:{name:"tag",style:"outline"},iconBgColor:"#4F46E5",category:"Ad Performance",priority:60,noDismiss:!1,badgeText:"Boost CVR",title:"A/B Test Listing Prices",descriptionFunction:(e,a)=>{let o="Price is a major factor in a buyer's decision. ";if(e.isAdvancedDataAvailable&&a.aa_CVR_kpr!==void 0){const r=a.aa_CVR_kpr.toFixed(2);a.aa_CVR_kpr<2&&a.aa_CVR_kpr>0?o+=`Your current ad Conversion Rate (CVR) is ${r}%. `:a.aa_CVR_kpr===0&&e.adClicks>10&&(o+=`Your ads are getting clicks but not converting (CVR: ${r}%). `)}return o+="Use A/B Testing to experiment with different price points for your advertised listings. This can help you find the sweet spot that maximizes sales and profit.",o},action:{label:"Start A/B Test",type:"link",target:"https://app.alura.io/operations/ab-tests"},condition:(e,a)=>!0},{id:"optimizeAdKeywordsInEtsy",icon:{name:"wrench-screwdriver",style:"outline"},iconBgColor:"#7C3AED",category:"Strategy & Insights",priority:80,noDismiss:!1,badgeText:"Refine Targeting",title:"Optimize Ad Keywords",descriptionFunction:(e,a)=>{let o="Review the 'Detailed stats' for your advertised listings on Etsy. ";const r=e.currencySymbolPlaceholder||h(e.currencyCode)||"$";return e.isAdvancedDataAvailable&&e.totalAdSpend>0&&(o+=`You've spent ${r}${e.totalAdSpend.toFixed(2)} on ads. `),o+="Identify search terms (keywords) that are driving clicks but have low sales or a ROAS below your breakeven point. Consider pausing these specific keywords within Etsy's ad dashboard to focus your budget on terms that convert profitably. Start by checking listings with the highest ad spend.",o},action:{label:"View Etsy Ads Listing Stats",type:"link",target:"https://www.etsy.com/your/shops/me/advertising/listings"},condition:(e,a)=>e.isAdvancedDataAvailable&&e.totalAdSpend>10}];function Ae(e,a,o,r=new Set){return!e||!a?[]:he.filter(n=>{if(r.has(n.id)&&!n.noDismiss)return!1;try{return typeof n.condition=="function"?n.condition(e,a,o):!0}catch(d){return console.error(`Error evaluating condition for recommendation '${n.id}':`,d),!1}})}function Ce(e,a){const o=e.aa_netAdProfit_sum,r=e.aa_ROAS_kpr,n=e.aa_breakevenROAS_prof,d=a.currencyCode,s=h(d),l=r;let i={title:"Performance Analysis",description:"Enter your ad data to see detailed insights.",statusClass:"neutral"};if(!a.isAdvancedDataAvailable)o>.005?i={...I.profitable,statusClass:"profitable"}:o<-.005?i={...I.unprofitable,statusClass:"not-profitable"}:i={...I.breakeven,statusClass:"breaking-even"},i.description=i.description.replace(/{currencySymbol}/g,s).replace(/{formattedRoasValueInCurrency}/g,g(l,d)).replace(/{roas}/g,m(r,2,!1,"")).replace(/{breakevenRoas}/g,isFinite(n)?m(n,2,!1,""):"N/A").replace(/{formattedNetProfit}/g,g(o,d,!0)).replace(/{formattedNetResult}/g,g(o,d,!0)).replace(/{formattedNetLoss}/g,g(o,d,!0));else{const c=e.m_budget_utilization_percent,u=a.adOrders;let p=null;if(o>.005){if(p=_e(r,n,o,u,a.totalAdSpend,a.performancePeriod_days),p&&A[p]){const f=A[p],y=w(c,a.dailyAdBudget,a.totalAdSpend,!0,p==="highlyProfitable");i.title=f.title,i.description=f.description.replace(/{roas}/g,m(r,2,!1,"")).replace(/{currencySymbol}/g,s).replace(/{formattedRoasValueInCurrency}/g,g(l,d)).replace(/{breakevenRoas}/g,isFinite(n)?m(n,2,!1,""):"N/A").replace(/{percentageAboveBreakeven}/g,n>0&&isFinite(n)?v(Math.round((r/n-1)*100)):"0").replace(/{formattedNetProfit}/g,g(o,d,!0)).replace(/{adOrders}/g,v(u)).replace(/{budgetInsight}/g,y).replace(/{budgetInsight_highlyProfitable}/g,y).replace(/{budgetInsight_early}/g,y),i.statusClass="profitable"}}else if(o<-.005){if(p=ye(r,n,o,a.totalAdSpend,a.performancePeriod_days),p&&C[p]){const f=C[p],y=w(c,a.dailyAdBudget,a.totalAdSpend,!1);i.title=f.title,i.description=f.description.replace(/{roas}/g,m(r,2,!1,"")).replace(/{currencySymbol}/g,s).replace(/{formattedRoasValueInCurrency}/g,g(l,d)).replace(/{breakevenRoas}/g,isFinite(n)?m(n,2,!1,""):"N/A").replace(/{formattedNetLoss}/g,g(o,d,!0)).replace(/{adOrders}/g,v(u)).replace(/{budgetInsight_unprofitable}/g,y).replace(/{budgetInsight_unprofitable_severe}/g,y),i.statusClass="not-profitable"}}else if(p=ve(r,n,o,a.totalAdSpend,a.performancePeriod_days),p&&b[p]){const f=b[p],y=w(c,a.dailyAdBudget,a.totalAdSpend,!1);i.title=f.title,i.description=f.description.replace(/{roas}/g,m(r,2,!1,"")).replace(/{currencySymbol}/g,s).replace(/{formattedRoasValueInCurrency}/g,g(l,d)).replace(/{breakevenRoas}/g,isFinite(n)?m(n,2,!1,""):"N/A").replace(/{formattedNetResult}/g,g(o,d,!0)).replace(/{adOrders}/g,v(u)).replace(/{percentageAboveBreakeven}/g,n>0&&isFinite(n)&&r>n?v(Math.round((r/n-1)*100)):"0").replace(/{percentageBelowBreakeven}/g,n>0&&isFinite(n)&&r<n?v(Math.round((1-r/n)*100)):"0").replace(/{budgetInsight_breakeven}/g,y),i.statusClass="breaking-even"}if(!p||i.title==="Performance Analysis"){const f=w(e.m_budget_utilization_percent,a.dailyAdBudget,a.totalAdSpend,o>.005,o>.005&&r>A.mediumProfitable.roasMultiplier.min*(isFinite(n)&&n>0?n:1.5));o>.005?(i.title="Ads Profitable (General)",i.description=`Your ads are profitable with a ROAS of ${m(r,2,!1,"x")} and net profit of ${g(o,d,!0)}. Review detailed metrics for more insights. ${f}`,i.statusClass="profitable"):o<-.005?(i.title="Ads Unprofitable (General)",i.description=`Your ads are unprofitable with a ROAS of ${m(r,2,!1,"x")} and net loss of ${g(o,d,!0)}. Review detailed metrics to identify areas for improvement. ${f}`,i.statusClass="not-profitable"):(i.title="Ads Breaking Even (General)",i.description=`Your ads are breaking even with a ROAS of ${m(r,2,!1,"x")}. ${f}`,i.statusClass="breaking-even")}}return i}const be={"magnifying-glass-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"sparkles-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M4.5 22V17M4.5 7V2M2 4.5H7M2 19.5H7M13 3L11.2658 7.50886C10.9838 8.24209 10.8428 8.60871 10.6235 8.91709C10.4292 9.1904 10.1904 9.42919 9.91709 9.62353C9.60871 9.84281 9.24209 9.98381 8.50886 10.2658L4 12L8.50886 13.7342C9.24209 14.0162 9.60871 14.1572 9.91709 14.3765C10.1904 14.5708 10.4292 14.8096 10.6235 15.0829C10.8428 15.3913 10.9838 15.7579 11.2658 16.4911L13 21L14.7342 16.4911C15.0162 15.7579 15.1572 15.3913 15.3765 15.0829C15.5708 14.8096 15.8096 14.5708 16.0829 14.3765C16.3913 14.1572 16.7579 14.0162 17.4911 13.7342L22 12L17.4911 10.2658C16.7579 9.98381 16.3913 9.8428 16.0829 9.62353C15.8096 9.42919 15.5708 9.1904 15.3765 8.91709C15.1572 8.60871 15.0162 8.24209 14.7342 7.50886L13 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"adjustments-horizontal-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M5 21L5 15M5 15C6.10457 15 7 14.1046 7 13C7 11.8954 6.10457 11 5 11C3.89543 11 3 11.8954 3 13C3 14.1046 3.89543 15 5 15ZM5 7V3M12 21V15M12 7V3M12 7C10.8954 7 10 7.89543 10 9C10 10.1046 10.8954 11 12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7ZM19 21V17M19 17C20.1046 17 21 16.1046 21 15C21 13.8954 20.1046 13 19 13C17.8954 13 17 13.8954 17 15C17 16.1046 17.8954 17 19 17ZM19 9V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"exclamation-triangle-solid":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M11.9998 8.99999V13M11.9998 17H12.0098M10.6151 3.89171L2.39019 18.0983C1.93398 18.8863 1.70588 19.2803 1.73959 19.6037C1.769 19.8857 1.91677 20.142 2.14613 20.3088C2.40908 20.5 2.86435 20.5 3.77487 20.5H20.2246C21.1352 20.5 21.5904 20.5 21.8534 20.3088C22.0827 20.142 22.2305 19.8857 22.2599 19.6037C22.2936 19.2803 22.0655 18.8863 21.6093 18.0983L13.3844 3.89171C12.9299 3.10654 12.7026 2.71396 12.4061 2.58211C12.1474 2.4671 11.8521 2.4671 11.5935 2.58211C11.2969 2.71396 11.0696 3.10655 10.6151 3.89171Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"receipt-percent-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M9 9H9.01M15 15H15.01M16 8L8 16M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM9.5 9C9.5 9.27614 9.27614 9.5 9 9.5C8.72386 9.5 8.5 9.27614 8.5 9C8.5 8.72386 8.72386 8.5 9 8.5C9.27614 8.5 9.5 8.72386 9.5 9ZM15.5 15C15.5 15.2761 15.2761 15.5 15 15.5C14.7239 15.5 14.5 15.2761 14.5 15C14.5 14.7239 14.7239 14.5 15 14.5C15.2761 14.5 15.5 14.7239 15.5 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"beaker-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M9 6V10.5012C9 11.0521 9 11.3276 8.93132 11.5829C8.87047 11.809 8.77037 12.0228 8.63557 12.2143C8.48344 12.4305 8.27182 12.6068 7.84859 12.9595L4.15141 16.0405C3.72818 16.3932 3.51656 16.5695 3.36443 16.7857C3.22963 16.9772 3.12953 17.191 3.06868 17.4171C3 17.6724 3 17.9479 3 18.4988V18.8C3 19.9201 3 20.4802 3.21799 20.908C3.40973 21.2843 3.71569 21.5903 4.09202 21.782C4.51984 22 5.0799 22 6.2 22H17.8C18.9201 22 19.4802 22 19.908 21.782C20.2843 21.5903 20.5903 21.2843 20.782 20.908C21 20.4802 21 19.9201 21 18.8V18.4988C21 17.9479 21 17.6724 20.9313 17.4171C20.8705 17.191 20.7704 16.9772 20.6356 16.7857C20.4834 16.5695 20.2718 16.3932 19.8486 16.0405L16.1514 12.9595C15.7282 12.6068 15.5166 12.4305 15.3644 12.2143C15.2296 12.0228 15.1295 11.809 15.0687 11.5829C15 11.3276 15 11.0521 15 10.5012V6M8.3 6H15.7C15.98 6 16.12 6 16.227 5.9455C16.3211 5.89757 16.3976 5.82108 16.4455 5.727C16.5 5.62004 16.5 5.48003 16.5 5.2V2.8C16.5 2.51997 16.5 2.37996 16.4455 2.273C16.3976 2.17892 16.3211 2.10243 16.227 2.0545C16.12 2 15.98 2 15.7 2H8.3C8.01997 2 7.87996 2 7.773 2.0545C7.67892 2.10243 7.60243 2.17892 7.5545 2.273C7.5 2.37996 7.5 2.51997 7.5 2.8V5.2C7.5 5.48003 7.5 5.62004 7.5545 5.727C7.60243 5.82108 7.67892 5.89757 7.773 5.9455C7.87996 6 8.01997 6 8.3 6ZM5.5 17H18.5C18.9647 17 19.197 17 19.3902 17.0384C20.1836 17.1962 20.8038 17.8164 20.9616 18.6098C21 18.803 21 19.0353 21 19.5C21 19.9647 21 20.197 20.9616 20.3902C20.8038 21.1836 20.1836 21.8038 19.3902 21.9616C19.197 22 18.9647 22 18.5 22H5.5C5.03534 22 4.80302 22 4.60982 21.9616C3.81644 21.8038 3.19624 21.1836 3.03843 20.3902C3 20.197 3 19.9647 3 19.5C3 19.0353 3 18.803 3.03843 18.6098C3.19624 17.8164 3.81644 17.1962 4.60982 17.0384C4.80302 17 5.03534 17 5.5 17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"pause-circle-solid":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M9.5 15V9M14.5 15V9M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"star-solid":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M11.2827 3.45332C11.5131 2.98638 11.6284 2.75291 11.7848 2.67831C11.9209 2.61341 12.0791 2.61341 12.2152 2.67831C12.3717 2.75291 12.4869 2.98638 12.7174 3.45332L14.9041 7.88328C14.9721 8.02113 15.0061 8.09006 15.0558 8.14358C15.0999 8.19096 15.1527 8.22935 15.2113 8.25662C15.2776 8.28742 15.3536 8.29854 15.5057 8.32077L20.397 9.03571C20.9121 9.11099 21.1696 9.14863 21.2888 9.27444C21.3925 9.38389 21.4412 9.5343 21.4215 9.68377C21.3988 9.85558 21.2124 10.0372 20.8395 10.4004L17.3014 13.8464C17.1912 13.9538 17.136 14.0076 17.1004 14.0715C17.0689 14.128 17.0487 14.1902 17.0409 14.2545C17.0321 14.3271 17.0451 14.403 17.0711 14.5547L17.906 19.4221C17.994 19.9355 18.038 20.1922 17.9553 20.3445C17.8833 20.477 17.7554 20.57 17.6071 20.5975C17.4366 20.6291 17.2061 20.5078 16.7451 20.2654L12.3724 17.9658C12.2361 17.8942 12.168 17.8584 12.0962 17.8443C12.0327 17.8318 11.9673 17.8318 11.9038 17.8443C11.832 17.8584 11.7639 17.8942 11.6277 17.9658L7.25492 20.2654C6.79392 20.5078 6.56341 20.6291 6.39297 20.5975C6.24468 20.57 6.11672 20.477 6.04474 20.3445C5.962 20.1922 6.00603 19.9355 6.09407 19.4221L6.92889 14.5547C6.95491 14.403 6.96793 14.3271 6.95912 14.2545C6.95132 14.1902 6.93111 14.128 6.89961 14.0715C6.86402 14.0076 6.80888 13.9538 6.69859 13.8464L3.16056 10.4004C2.78766 10.0372 2.60121 9.85558 2.57853 9.68377C2.55879 9.5343 2.60755 9.38389 2.71125 9.27444C2.83044 9.14863 3.08797 9.11099 3.60304 9.03571L8.49431 8.32077C8.64642 8.29854 8.72248 8.28742 8.78872 8.25662C8.84736 8.22935 8.90016 8.19096 8.94419 8.14358C8.99391 8.09006 9.02793 8.02113 9.09597 7.88328L11.2827 3.45332Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"light-bulb-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M15 16.5V19C15 19.9319 15 20.3978 14.8478 20.7654C14.6448 21.2554 14.2554 21.6448 13.7654 21.8478C13.3978 22 12.9319 22 12 22C11.0681 22 10.6022 22 10.2346 21.8478C9.74458 21.6448 9.35523 21.2554 9.15224 20.7654C9 20.3978 9 19.9319 9 19V16.5M15 16.5C17.6489 15.3427 19.5 12.5755 19.5 9.5C19.5 5.35786 16.1421 2 12 2C7.85786 2 4.5 5.35786 4.5 9.5C4.5 12.5755 6.35114 15.3427 9 16.5M15 16.5H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"key-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M17 8.99994C17 8.48812 16.8047 7.9763 16.4142 7.58579C16.0237 7.19526 15.5118 7 15 7M15 15C18.3137 15 21 12.3137 21 9C21 5.68629 18.3137 3 15 3C11.6863 3 9 5.68629 9 9C9 9.27368 9.01832 9.54308 9.05381 9.80704C9.11218 10.2412 9.14136 10.4583 9.12172 10.5956C9.10125 10.7387 9.0752 10.8157 9.00469 10.9419C8.937 11.063 8.81771 11.1823 8.57913 11.4209L3.46863 16.5314C3.29568 16.7043 3.2092 16.7908 3.14736 16.8917C3.09253 16.9812 3.05213 17.0787 3.02763 17.1808C3 17.2959 3 17.4182 3 17.6627V19.4C3 19.9601 3 20.2401 3.10899 20.454C3.20487 20.6422 3.35785 20.7951 3.54601 20.891C3.75992 21 4.03995 21 4.6 21H7V19H9V17H11L12.5791 15.4209C12.8177 15.1823 12.937 15.063 13.0581 14.9953C13.1843 14.9248 13.2613 14.8987 13.4044 14.8783C13.5417 14.8586 13.7588 14.8878 14.193 14.9462C14.4569 14.9817 14.7263 15 15 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"currency-dollar-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M8.5 14.6667C8.5 15.9553 9.54467 17 10.8333 17H13C14.3807 17 15.5 15.8807 15.5 14.5C15.5 13.1193 14.3807 12 13 12H11C9.61929 12 8.5 10.8807 8.5 9.5C8.5 8.11929 9.61929 7 11 7H13.1667C14.4553 7 15.5 8.04467 15.5 9.33333M12 5.5V7M12 17V18.5M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"cursor-arrow-rays-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M9 3.5V2M5.06066 5.06066L4 4M5.06066 13L4 14.0607M13 5.06066L14.0607 4M3.5 9H2M8.5 8.5L12.6111 21.2778L15.5 18.3889L19.1111 22L22 19.1111L18.3889 15.5L21.2778 12.6111L8.5 8.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"video-camera-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M22 8.93137C22 8.32555 22 8.02265 21.8802 7.88238C21.7763 7.76068 21.6203 7.69609 21.4608 7.70865C21.2769 7.72312 21.0627 7.93731 20.6343 8.36569L17 12L20.6343 15.6343C21.0627 16.0627 21.2769 16.2769 21.4608 16.2914C21.6203 16.3039 21.7763 16.2393 21.8802 16.1176C22 15.9774 22 15.6744 22 15.0686V8.93137Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 <path d="M2 9.8C2 8.11984 2 7.27976 2.32698 6.63803C2.6146 6.07354 3.07354 5.6146 3.63803 5.32698C4.27976 5 5.11984 5 6.8 5H12.2C13.8802 5 14.7202 5 15.362 5.32698C15.9265 5.6146 16.3854 6.07354 16.673 6.63803C17 7.27976 17 8.11984 17 9.8V14.2C17 15.8802 17 16.7202 16.673 17.362C16.3854 17.9265 15.9265 18.3854 15.362 18.673C14.7202 19 13.8802 19 12.2 19H6.8C5.11984 19 4.27976 19 3.63803 18.673C3.07354 18.3854 2.6146 17.9265 2.32698 17.362C2 16.7202 2 15.8802 2 14.2V9.8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"photo-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M5.99958 20.0004L14.8686 11.1314C15.2646 10.7354 15.4627 10.5373 15.691 10.4632C15.8918 10.3979 16.1082 10.3979 16.309 10.4632C16.5373 10.5373 16.7354 10.7354 17.1314 11.1314L21.4053 15.4053M10.5 8.5C10.5 9.60457 9.60457 10.5 8.5 10.5C7.39543 10.5 6.5 9.60457 6.5 8.5C6.5 7.39543 7.39543 6.5 8.5 6.5C9.60457 6.5 10.5 7.39543 10.5 8.5ZM22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"tag-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M9 10.5L11 12.5L15.5 8M19 21V7.8C19 6.11984 19 5.27976 18.673 4.63803C18.3854 4.07354 17.9265 3.6146 17.362 3.32698C16.7202 3 15.8802 3 14.2 3H9.8C8.11984 3 7.27976 3 6.63803 3.32698C6.07354 3.6146 5.6146 4.07354 5.32698 4.63803C5 5.27976 5 6.11984 5 7.8V21L12 17L19 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`,"wrench-screwdriver-outline":`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
 <path d="M6 6L10.5 10.5M6 6H3L2 3L3 2L6 3V6ZM19.259 2.74101L16.6314 5.36863C16.2354 5.76465 16.0373 5.96265 15.9632 6.19098C15.8979 6.39183 15.8979 6.60817 15.9632 6.80902C16.0373 7.03735 16.2354 7.23535 16.6314 7.63137L16.8686 7.86863C17.2646 8.26465 17.4627 8.46265 17.691 8.53684C17.8918 8.6021 18.1082 8.6021 18.309 8.53684C18.5373 8.46265 18.7354 8.26465 19.1314 7.86863L21.5893 5.41072C21.854 6.05488 22 6.76039 22 7.5C22 10.5376 19.5376 13 16.5 13C16.1338 13 15.7759 12.9642 15.4298 12.8959C14.9436 12.8001 14.7005 12.7521 14.5532 12.7668C14.3965 12.7824 14.3193 12.8059 14.1805 12.8802C14.0499 12.9501 13.919 13.081 13.657 13.343L6.5 20.5C5.67157 21.3284 4.32843 21.3284 3.5 20.5C2.67157 19.6716 2.67157 18.3284 3.5 17.5L10.657 10.343C10.919 10.081 11.0499 9.95005 11.1198 9.81949C11.1941 9.68068 11.2176 9.60347 11.2332 9.44681C11.2479 9.29945 11.1999 9.05638 11.1041 8.57024C11.0358 8.22406 11 7.86621 11 7.5C11 4.46243 13.4624 2 16.5 2C17.5055 2 18.448 2.26982 19.259 2.74101ZM12.0001 14.9999L17.5 20.4999C18.3284 21.3283 19.6716 21.3283 20.5 20.4999C21.3284 19.6715 21.3284 18.3283 20.5 17.4999L15.9753 12.9753C15.655 12.945 15.3427 12.8872 15.0408 12.8043C14.6517 12.6975 14.2249 12.7751 13.9397 13.0603L12.0001 14.9999Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
 </svg>`};async function z(e,a){const o=`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 16V12M12 8H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,r=`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M11.9998 8.99999V13M11.9998 17H12.0098M10.6151 3.89171L2.39019 18.0983C1.93398 18.8863 1.70588 19.2803 1.73959 19.6037C1.769 19.8857 1.91677 20.142 2.14613 20.3088C2.40908 20.5 2.86435 20.5 3.77487 20.5H20.2246C21.1352 20.5 21.5904 20.5 21.8534 20.3088C22.0827 20.142 22.2305 19.8857 22.2599 19.6037C22.2936 19.2803 22.0655 18.8863 21.6093 18.0983L13.3844 3.89171C12.9299 3.10654 12.7026 2.71396 12.4061 2.58211C12.1474 2.4671 11.8521 2.4671 11.5935 2.58211C11.2969 2.71396 11.0696 3.10655 10.6151 3.89171Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`;if(!e||!a)return o;const n=`${e}-${a}`,d=be[n];return d||(console.warn(`Icon '${n}' not found in local ICONS object.`),r)}function Se(e){return e.currencySymbolPlaceholder||h(e.currencyCode)||"$"}async function U(e,a,o,r,n,d){if(!t.recommendationsSection)return;const s=Ae(e,a,o,n);we(s,r,d.onFilterClick);const l=r==="View all"||!r?s:s.filter(i=>i.category===r);if(await Re(l,e,a,d.onActionClick,d.onDismissClick),t.recommendationsEmptyState&&t.recommendationOutputArea){const i=t.recommendationOutputArea.hasChildNodes();l.length>0&&i?(t.recommendationsEmptyState.style.display="none",t.recommendationOutputArea.style.display="block"):(t.recommendationsEmptyState.style.display="flex",t.recommendationOutputArea.style.display="none",s.length===0&&t.categoryFilters&&(t.categoryFilters.innerHTML=""))}}function we(e,a,o){if(!t.categoryFilters||(t.categoryFilters.innerHTML="",e.length===0))return;const r=new Set;e.forEach(s=>{s.category&&r.add(s.category)});const n=(s,l=!1)=>{const i=document.createElement("button");i.textContent=s,i.className="filter-badge-base";const c=l?a==="View all"||!a:a===s;i.classList.add(c?"filter-badge-active":"filter-badge-inactive"),i.dataset.category=s,i.addEventListener("click",()=>o(s)),t.categoryFilters.appendChild(i)};n("View all",!0),["Budget & Profit","Ad Performance","Strategy & Insights"].forEach(s=>{r.has(s)&&n(s)})}async function Re(e,a,o,r,n){if(t.recommendationOutputArea&&(t.recommendationOutputArea.innerHTML="",e.length!==0))for(const d of e){const s=document.createElement("div");s.className="recommendation-card-wrapper bg-p-gray-25 border border-p-gray-200 rounded-xl shadow-custom-xs";const l=typeof d.titleFunction=="function"?d.titleFunction(a,o):d.title;let i=typeof d.descriptionFunction=="function"?d.descriptionFunction(a,o):d.description||"";const c=typeof d.badgeTextFunction=="function"?d.badgeTextFunction(a,o):d.badgeText||"",u=Se(a);i=i.replace(/{currencySymbol}/g,u),o&&o.aa_ROAS_kpr!==void 0&&(i=i.replace(/{roas}x/g,`${m(o.aa_ROAS_kpr,2)}x`),i=i.replace(/{roas}/g,m(o.aa_ROAS_kpr,2))),o&&o.aa_CTR_eng!==void 0&&(i=i.replace(/{CTR}/g,m(o.aa_CTR_eng,2))),o&&o.aa_CVR_kpr!==void 0&&(i=i.replace(/{CVR}/g,m(o.aa_CVR_kpr,2)));const p=d.icon;let f="";p&&typeof z=="function"?f=await z(p.name,p.style):f='<svg viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /></svg>';const E=`<div class="icon-display" style="--icon-bg-color: ${d.iconBgColor||"#667085"};">${f}</div>`;let P="";if(d.action&&(P=`
                <div class="p-4 border-t border-p-gray-200 flex justify-end items-center space-x-4">
                    ${d.noDismiss?"":`<button class="text-sm font-semibold text-p-gray-600 hover:text-p-gray-700 active:text-p-gray-800 transition-colors duration-200" data-rec-id="${d.id}" data-action-type="dismiss">Dismiss</button>`}
                    <button class="text-sm font-semibold text-p-primary-700 hover:text-p-primary-600 active:text-p-primary-800 transition-colors duration-200" data-rec-id="${d.id}" data-action-type="primary" data-action-kind="${d.action.type}" data-action-target="${d.action.target}">${d.action.label}</button>
                </div>`),s.innerHTML=`
            <div class="px-4 py-5">
                <div class="flex items-start space-x-3 items-center">
                    ${E}
                    <div class="flex-grow">
                        <div class="flex items-center space-x-2 mb-1">
                            <h5 class="text-base font-medium text-p-gray-900">${l}</h5>
                            ${c?`<span class="recommendation-title-badge-style">${c}</span>`:""}
                        </div>
                    </div>
                </div>
                <div class="mt-2">
                    <p class="text-sm text-p-gray-600">${i}</p>
                </div>
            </div>
            ${P}
        `,d.action){const O=s.querySelector('button[data-action-type="dismiss"]');O&&O.addEventListener("click",()=>n(d.id));const T=s.querySelector('button[data-action-type="primary"]');T&&T.addEventListener("click",()=>r(d.id,d.action.type,d.action.target))}t.recommendationOutputArea.appendChild(s)}}function xe(e,a,o){const r=a.currencyCode;t.roasStatValue&&(t.roasStatValue.textContent=m(e.aa_ROAS_kpr,2,!1,"x")),t.breakevenRoasStatValue&&(t.breakevenRoasStatValue.textContent=isFinite(e.aa_breakevenROAS_prof)?m(e.aa_breakevenROAS_prof,2,!1,"x"):"-"),t.netAdProfitStatValue&&(t.netAdProfitStatValue.textContent=g(e.aa_netAdProfit_sum,r,!0));const n=Ce(e,a);if(t.profitabilityMessageTitle&&(t.profitabilityMessageTitle.textContent=n.title),t.profitabilityMessageText&&(t.profitabilityMessageText.innerHTML=n.description),t.profitabilityStatusBadge){const s=t.profitabilityStatusBadge;s.textContent=n.statusClass.charAt(0).toUpperCase()+n.statusClass.slice(1).replace("-"," ");const l="inline-flex items-center whitespace-nowrap mix-blend-multiply rounded-full min-h-[22px] px-[7px] py-px text-xs leading-18px gap-x-1.5";n.statusClass==="profitable"?s.className=`${l} border border-p-success-200 bg-p-success-50 text-p-success-700`:n.statusClass==="not-profitable"?s.className=`${l} border border-p-error-200 bg-p-error-50 text-p-error-700`:n.statusClass==="breaking-even"?s.className=`${l} border border-p-warning-200 bg-p-warning-50 text-p-warning-700`:s.className=`${l} border border-p-gray-200 bg-p-gray-50 text-p-gray-700`,s.classList.remove("hidden")}if(t.profitabilityMessageCard){const s=t.profitabilityMessageCard,l="p-4 rounded-lg mt-4 shadow-custom-xs";n.statusClass==="profitable"?s.className=`${l} bg-p-success-25 border border-p-success-200 text-p-success-700`:n.statusClass==="not-profitable"?s.className=`${l} bg-p-error-25 border border-p-error-200 text-p-error-700`:n.statusClass==="breaking-even"?s.className=`${l} bg-p-warning-25 border border-p-warning-200 text-p-warning-700`:s.className=`${l} bg-p-gray-25 border border-p-gray-200 text-p-gray-700`}if(t.performancePeriodDropdown&&t.aa_performancePeriod){const s=t.performancePeriodDropdown.options[t.performancePeriodDropdown.selectedIndex]?.text||"Selected Period";t.aa_performancePeriod.textContent=`${s} (${v(e.aa_performancePeriod)} days)`}if(t.aa_totalAdSpend_sum&&(t.aa_totalAdSpend_sum.textContent=g(e.aa_totalAdSpend_sum,r)),t.aa_totalAdRevenue_sum&&(t.aa_totalAdRevenue_sum.textContent=g(e.aa_totalAdRevenue_sum,r)),t.aa_adOrders_sum&&(t.aa_adOrders_sum.textContent=v(e.aa_adOrders_sum)),t.aa_netAdProfit_sum&&(t.aa_netAdProfit_sum.textContent=g(e.aa_netAdProfit_sum,r,!0)),t.aa_ROAS_kpr&&(t.aa_ROAS_kpr.textContent=m(e.aa_ROAS_kpr,2,!1,"x")),t.aa_ACOS_kpr&&(t.aa_ACOS_kpr.textContent=_(e.aa_ACOS_kpr)),t.aa_CVR_kpr&&(t.aa_CVR_kpr.textContent=_(e.aa_CVR_kpr)),t.aa_CPA_kpr&&(t.aa_CPA_kpr.textContent=g(e.aa_CPA_kpr,r)),t.aa_totalAdRevenue_prof&&(t.aa_totalAdRevenue_prof.textContent=g(e.aa_totalAdRevenue_prof,r)),t.aa_totalAdSpend_prof&&(t.aa_totalAdSpend_prof.textContent=g(e.aa_totalAdSpend_prof,r)),t.aa_COGS_prof&&(t.aa_COGS_prof.textContent=g(e.aa_COGS_prof,r)),t.aa_totalCosts_prof&&(t.aa_totalCosts_prof.textContent=g(e.aa_totalCosts_prof,r)),t.aa_netProfit_prof&&(t.aa_netProfit_prof.textContent=g(e.aa_netProfit_prof,r,!0)),t.aa_netProfitMargin_prof&&(t.aa_netProfitMargin_prof.textContent=_(e.aa_netProfitMargin_prof)),t.aa_profitStatus_prof&&(t.aa_profitStatus_prof.textContent=e.aa_profitStatus_prof),t.aa_ROAS_prof&&(t.aa_ROAS_prof.textContent=m(e.aa_ROAS_prof,2,!1,"x")),t.aa_breakevenROAS_prof&&(t.aa_breakevenROAS_prof.textContent=isFinite(e.aa_breakevenROAS_prof)?m(e.aa_breakevenROAS_prof,2,!1,"x"):"-"),t.aa_ACOS_prof&&(t.aa_ACOS_prof.textContent=_(e.aa_ACOS_prof)),t.aa_breakevenACOS_prof&&(t.aa_breakevenACOS_prof.textContent=_(e.aa_breakevenACOS_prof)),t.aa_adImpressions_eng&&(t.aa_adImpressions_eng.textContent=v(e.aa_adImpressions_eng)),t.aa_adClicks_eng&&(t.aa_adClicks_eng.textContent=v(e.aa_adClicks_eng)),t.aa_CTR_eng&&(t.aa_CTR_eng.textContent=_(e.aa_CTR_eng)),t.aa_totalAdSpend_eng&&(t.aa_totalAdSpend_eng.textContent=g(e.aa_totalAdSpend_eng,r)),t.aa_CPC_eng&&(t.aa_CPC_eng.textContent=g(e.aa_CPC_eng,r)),t.aa_CPM_eng&&(t.aa_CPM_eng.textContent=g(e.aa_CPM_eng,r)),t.aa_RPC_eng&&(t.aa_RPC_eng.textContent=g(e.aa_RPC_eng,r)),t.aa_PPC_eng&&(t.aa_PPC_eng.textContent=g(e.aa_PPC_eng,r,!0)),t.aa_adOrders_eng&&(t.aa_adOrders_eng.textContent=v(e.aa_adOrders_eng)),t.aa_CVR_eng&&(t.aa_CVR_eng.textContent=_(e.aa_CVR_eng)),t.aa_AOV_eng&&(t.aa_AOV_eng.textContent=g(e.aa_AOV_eng,r)),t.aa_CPA_eng&&(t.aa_CPA_eng.textContent=g(e.aa_CPA_eng,r)),t.aa_profitPerSale_eng&&(t.aa_profitPerSale_eng.textContent=g(e.aa_profitPerSale_eng,r,!0)),t.co_blendedROAS&&(t.co_blendedROAS.textContent=m(e.co_blendedROAS,2,!1,"x")),t.co_overallShopNetProfitLoss&&(t.co_overallShopNetProfitLoss.textContent=g(e.co_overallShopNetProfitLoss,r,!0)),t.co_TACoS_percent&&(t.co_TACoS_percent.textContent=_(e.co_TACoS_percent)),t.co_percentRevenueFromAds&&(t.co_percentRevenueFromAds.textContent=_(e.co_percentRevenueFromAds)),t.co_percentOrdersFromAds&&(t.co_percentOrdersFromAds.textContent=_(e.co_percentOrdersFromAds)),t.co_combinedConversionRate&&(t.co_combinedConversionRate.textContent=`Organic: ${_(e.co_organicCVR_forOverview)} | Ads: ${_(e.co_adCVR_forOverview)}`),t.co_combinedAOV&&(t.co_combinedAOV.textContent=`Organic: ${g(e.co_organicAOV_forOverview,r)} | Ads: ${g(e.co_adAOV_forOverview,r)}`),t.co_adSpendToOverallGrossProfitRatio_percent&&(t.co_adSpendToOverallGrossProfitRatio_percent.textContent=_(e.co_adSpendToOverallGrossProfitRatio_percent)),U(a,e,o.currentView,o.currentCategoryFilter,o.dismissedRecommendationIds,o.recommendationEventCallbacks).catch(s=>console.error("Error rendering recommendations from updateDOM:",s)),["cdt_ad_visits","cdt_organic_visits","cdt_total_visits","cdt_ad_orders","cdt_organic_orders","cdt_total_orders","cdt_ad_cvr","cdt_organic_cvr","cdt_total_cvr","cdt_ad_revenue","cdt_organic_revenue","cdt_total_revenue","cdt_ad_aov","cdt_organic_aov","cdt_total_aov","cdt_ad_revenuePercent","cdt_organic_revenuePercent","cdt_ad_ordersPercent","cdt_organic_ordersPercent"].forEach(s=>{if(t[s]&&e[s]!==void 0){let l=e[s];s.endsWith("_cvr")||s.endsWith("Percent")?t[s].textContent=_(l):s.endsWith("_revenue")||s.endsWith("_aov")?t[s].textContent=g(l,r):t[s].textContent=v(l)}}),t.budgetUtilizationText&&(a.dailyAdBudget>0&&a.performancePeriod_days>0?t.budgetUtilizationText.textContent=`You've utilized ${m(e.m_budget_utilization_percent,1)}% of your ad budget for this period, spending ${g(a.totalAdSpend,r)} out of a planned ${g(e.m_budget_totalBudgetedForPeriod,r)}.`:t.budgetUtilizationText.textContent="Enter your Daily Budget and Performance Period to see budget utilization."),t.budgetUtilizationProgressBarFill){const s=Math.min(100,Math.max(0,e.m_budget_utilization_percent));t.budgetUtilizationProgressBarFill.style.width=`${s}%`,t.budgetUtilizationProgressBarFill.classList.toggle("over-budget",e.m_budget_utilization_percent>100)}t.budgetUtilizationPercentageOnBar&&(t.budgetUtilizationPercentageOnBar.textContent=`${m(e.m_budget_utilization_percent,1)}%`)}function ke(){const e="-",a=t.currencySymbol?.value||"USD";[t.roasStatValue,t.breakevenRoasStatValue,t.netAdProfitStatValue,t.aa_performancePeriod,t.aa_totalAdSpend_sum,t.aa_totalAdRevenue_sum,t.aa_adOrders_sum,t.aa_netAdProfit_sum,t.aa_ROAS_kpr,t.aa_ACOS_kpr,t.aa_CVR_kpr,t.aa_CPA_kpr,t.aa_totalAdRevenue_prof,t.aa_totalAdSpend_prof,t.aa_COGS_prof,t.aa_totalCosts_prof,t.aa_netProfit_prof,t.aa_netProfitMargin_prof,t.aa_profitStatus_prof,t.aa_ROAS_prof,t.aa_breakevenROAS_prof,t.aa_ACOS_prof,t.aa_breakevenACOS_prof,t.aa_adImpressions_eng,t.aa_adClicks_eng,t.aa_CTR_eng,t.aa_totalAdSpend_eng,t.aa_CPC_eng,t.aa_CPM_eng,t.aa_RPC_eng,t.aa_PPC_eng,t.aa_adOrders_eng,t.aa_CVR_eng,t.aa_AOV_eng,t.aa_CPA_eng,t.aa_profitPerSale_eng,t.co_blendedROAS,t.co_overallShopNetProfitLoss,t.co_TACoS_percent,t.co_percentRevenueFromAds,t.co_percentOrdersFromAds,t.cdt_ad_visits,t.cdt_organic_visits,t.cdt_total_visits,t.cdt_ad_orders,t.cdt_organic_orders,t.cdt_total_orders,t.cdt_ad_cvr,t.cdt_organic_cvr,t.cdt_total_cvr,t.cdt_ad_revenue,t.cdt_organic_revenue,t.cdt_total_revenue,t.cdt_ad_aov,t.cdt_organic_aov,t.cdt_total_aov,t.cdt_ad_revenuePercent,t.cdt_organic_revenuePercent,t.cdt_ad_ordersPercent,t.cdt_organic_ordersPercent].forEach(r=>{r&&(r.textContent=e)}),t.profitabilityStatusBadge&&(t.profitabilityStatusBadge.textContent="",t.profitabilityStatusBadge.className="inline-flex items-center whitespace-nowrap mix-blend-multiply rounded-full min-h-[22px] px-[7px] py-px text-xs leading-18px gap-x-1.5 border border-p-gray-200 bg-p-gray-50 text-p-gray-700",t.profitabilityStatusBadge.classList.add("hidden")),t.profitabilityMessageTitle&&(t.profitabilityMessageTitle.textContent="Performance Analysis"),t.profitabilityMessageText&&(t.profitabilityMessageText.innerHTML="Enter your ad data to see detailed insights."),t.profitabilityMessageCard&&(t.profitabilityMessageCard.className="p-4 rounded-lg mt-4 shadow-custom-xs bg-p-gray-25 border border-p-gray-200 text-p-gray-700"),t.co_combinedConversionRate&&(t.co_combinedConversionRate.textContent="Organic: - | Ads: -"),t.co_combinedAOV&&(t.co_combinedAOV.textContent=`Organic: ${g(NaN,a)} | Ads: ${g(NaN,a)}`),t.budgetUtilizationText&&(t.budgetUtilizationText.textContent="Enter your Daily Budget and Performance Period to see budget utilization."),t.budgetUtilizationProgressBarFill&&(t.budgetUtilizationProgressBarFill.style.width="0%",t.budgetUtilizationProgressBarFill.classList.remove("over-budget")),t.budgetUtilizationPercentageOnBar&&(t.budgetUtilizationPercentageOnBar.textContent="0%"),t.recommendationsEmptyState&&(t.recommendationsEmptyState.style.display="flex"),t.recommendationOutputArea&&(t.recommendationOutputArea.innerHTML="",t.recommendationOutputArea.style.display="none"),t.categoryFilters&&(t.categoryFilters.innerHTML="")}const Y={onFilterClick:e=>Pe(e),onActionClick:(e,a,o)=>Te(e,a,o),onDismissClick:e=>Oe(e)};function R(){console.log("Logger: handleLiveCalculatePerformance() triggered.");const e=ge(),a=fe(e);console.log("Logger: Inputs and metrics calculated.",{inputs:e,metrics:a});const o=W(),r=ie(),n=de();if(!(t.totalAdSpend&&t.totalAdSpend.value.trim()!==""&&t.totalAdRevenue_fromAds&&t.totalAdRevenue_fromAds.value.trim()!==""&&t.averageProductProfitMargin_percent&&t.averageProductProfitMargin_percent.value.trim()!=="")){t.profitabilityMessageCard&&(t.profitabilityMessageCard.style.display="none"),ke(),U(e,null,o,r,n,Y).catch(s=>console.error("Error rendering recommendations on core input check:",s));return}t.profitabilityMessageCard&&(t.profitabilityMessageCard.style.display="block"),console.log("Logger: Updating DOM..."),xe(a,e,{currentView:o,currentCategoryFilter:r,dismissedRecommendationIds:n,recommendationEventCallbacks:Y}),console.log("Logger: DOM update complete.")}const q=le(R,350);function x(e){ue(e);const a=e==="advanced";t.normalInputsContainer&&(t.normalInputsContainer.style.display=a?"none":"grid"),t.advancedInputsContainer&&(t.advancedInputsContainer.style.display=a?"block":"none"),t.advertisingAnalysisSectionWrapper&&(t.advertisingAnalysisSectionWrapper.style.display=a?"block":"none"),t.organicVsAdComparisonSectionWrapper&&(t.organicVsAdComparisonSectionWrapper.style.display=a?"block":"none"),t.budgetUtilizationSectionWrapper&&(t.budgetUtilizationSectionWrapper.style.display=a?"block":"none"),t.exportSection&&(t.exportSection.style.display=a?"flex":"none"),t.toggleNormalViewButton&&t.toggleNormalViewButton.classList.toggle("active",!a),t.toggleAdvancedViewButton&&t.toggleAdvancedViewButton.classList.toggle("active",a),a&&pe(),R()}function k(e,a,o){const r=e.dataset.tabTarget;o.forEach(n=>{n&&(n.classList.remove("active"),n.classList.add("hidden"),n.id===r&&(n.classList.add("active"),n.classList.remove("hidden")))}),a.forEach(n=>{n&&n.classList.remove("active")}),e&&e.classList.add("active")}function Pe(e){ne(e),R()}function Oe(e){se(e),R()}function Te(e,a,o){a==="link"?window.open(o,"_blank"):a==="function_call"?o==="toggleAdvancedView"?x("advanced"):console.warn(`Unhandled function_call target: ${o} for recommendation: ${e}`):console.warn(`Unknown action type: ${a} for recommendation: ${e}`)}const Ie={totalAdSpendInput:{title:"Total Ad Spend",text:"Enter the total amount spent on your Etsy advertising campaigns for the selected period.",maxWidth:"w-72 sm:w-80"},totalAdRevenueInput:{title:"Total Ad Revenue",text:"Enter the total revenue generated directly from your Etsy ads for the selected period.",maxWidth:"w-72 sm:w-80"},avgProfitMarginInput:{title:"Average Product Profit Margin (%)",text:"Enter your average profit margin per product after COGS and Etsy transaction/listing fees, but before ad spend. E.g., if a product sells for $20, and costs $10 (COGS+fees), your profit margin is 50%.",maxWidth:"w-72 sm:w-80"},advViewsInput:{title:"Ad Views (Impressions)",text:"Enter the total number of times your ads were shown (impressions) during the performance period.",maxWidth:"max-w-xs"},advClicksInput:{title:"Ad Clicks",text:"Enter the total number of clicks your ads received during the performance period.",maxWidth:"max-w-xs"},advOrdersInput:{title:"Ad Orders",text:"Enter the total number of orders generated directly from your ads during the performance period.",maxWidth:"max-w-xs"},advDailyBudgetInput:{title:"Daily Ad Budget",text:"Enter your average daily budget for Etsy Ads. This helps in budget utilization calculations if a performance period is also set.",maxWidth:"max-w-xs"},advPerfPeriodInput:{title:"Performance Period",text:"Select the time range for which your ad performance data applies. Ensure this matches your Shop Stats data period for accurate comparisons.",maxWidth:"max-w-xs"},advCurrencyInput:{title:"Currency",text:"Select the currency used for your ad spend and revenue figures.",maxWidth:"max-w-xs"},etsyAdsExternalLink:{title:"Go to Etsy Ads",text:"Opens your Etsy Ads dashboard. With the Alura extension installed, your data is automatically copied. Return here and click the import icon to paste.",maxWidth:"max-w-xs"},etsyAdsImport:{title:"Import Ads Data",text:"After visiting your Etsy Ads page with our extension installed, click here to paste your automatically copied data.",maxWidth:"max-w-xs"},shopStatsExternalLink:{title:"Go to Etsy Stats",text:"Opens your Shop Stats dashboard. With the Alura extension installed, your data is automatically copied. Return here and click the import icon to paste.",maxWidth:"max-w-xs"},shopStatsImport:{title:"Import Stats Data",text:"After visiting your Etsy Stats page with our extension installed, click here to paste your automatically copied data.",maxWidth:"max-w-xs"},shopVisitsInput:{title:"Total Overall Shop Visits",text:"Enter the total number of visits your entire Etsy shop received during the same performance period as your ad data.",maxWidth:"max-w-xs"},shopOrdersInput:{title:"Total Overall Shop Orders",text:"Enter the total number of orders your entire Etsy shop received during the same performance period.",maxWidth:"max-w-xs"},shopRevenueInput:{title:"Total Overall Shop Revenue",text:"Enter the total revenue your entire Etsy shop generated during the same performance period.",maxWidth:"max-w-xs"},roasStat:{title:"ROAS (Return on Ad Spend)",text:"Your return from ad spend. For every $1 spent on ads, this is how much revenue your ads generated.",formulaTitle:"Formula",formulaCode:"Total Ad Revenue / Total Ad Spend",maxWidth:"sm:w-80 w-72"},breakevenRoasStat:{title:"Breakeven ROAS",text:"The ROAS needed to cover your product costs and ad spend. A ROAS above this value means you are profitable.",formulaTitle:"Formula",formulaCode:"1 / Average Product Profit Margin",maxWidth:"sm:w-80 w-72"},netAdProfitStat:{title:"Net Ad Profit",text:"The actual profit earned from your ads after deducting ad spend and the cost of goods sold (based on your profit margin).",formulaTitle:"Formula",formulaCode:"(Ad Revenue * Avg. Profit Margin) - Ad Spend",maxWidth:"sm:w-80 w-72"},aa_performancePeriod:{title:"Performance Period",text:"The selected date range for which this advertising data is analyzed.",maxWidth:"sm:w-80 w-72"},aa_totalAdSpend_sum:{title:"Total Ad Spend",text:"The total amount of money spent on advertising during the performance period.",maxWidth:"sm:w-80 w-72"},aa_totalAdRevenue_sum:{title:"Total Ad Revenue",text:"The total revenue generated directly from these advertisements.",maxWidth:"sm:w-80 w-72"},aa_adOrders_sum:{title:"Orders from Ads",text:"The total number of orders that resulted directly from clicks on your ads.",maxWidth:"sm:w-80 w-72"},aa_netAdProfit_sum:{title:"Net Ad Profit",text:"The profit specifically from advertising after deducting ad spend and product costs attributed to ad revenue.",formulaTitle:"Formula",formulaCode:"(Ad Revenue * Profit Margin) - Ad Spend",maxWidth:"sm:w-80 w-72"},aa_ROAS_kpi:{title:"Return on Ad Spend (ROAS)",text:"Measures the gross revenue generated for every dollar spent on advertising.",formulaTitle:"Formula",formulaCode:"Total Ad Revenue / Total Ad Spend",maxWidth:"sm:w-80 w-72"},aa_ACOS_kpi:{title:"Advertising Cost of Sales (ACOS)",text:"The percentage of ad revenue that was spent on advertising.",formulaTitle:"Formula",formulaCode:"(Total Ad Spend / Total Ad Revenue) * 100%",maxWidth:"sm:w-80 w-72"},aa_CVR_kpi:{title:"Ad Conversion Rate (CVR)",text:"The percentage of ad clicks that resulted in an order.",formulaTitle:"Formula",formulaCode:"(Ad Orders / Ad Clicks) * 100%",maxWidth:"sm:w-80 w-72"},aa_CPA_kpi:{title:"Cost Per Acquisition (CPA)",text:"The average cost to acquire one customer (order) through your ads.",formulaTitle:"Formula",formulaCode:"Total Ad Spend / Ad Orders",maxWidth:"sm:w-80 w-72"},aa_totalAdRevenue_prof:{title:"Total Ad Revenue",text:"Revenue generated directly from ads.",maxWidth:"sm:w-80 w-72"},aa_totalAdSpend_prof:{title:"Total Ad Spend",text:"Total cost of advertising.",maxWidth:"sm:w-80 w-72"},aa_COGS_prof:{title:"Product & Etsy Fees (from Ad Revenue)",text:"Estimated cost of goods sold and Etsy fees for items sold via ads, calculated from Ad Revenue and your Average Product Profit Margin. Does not include ad spend itself.",formulaTitle:"Formula",formulaCode:"Ad Revenue * (1 - Avg. Profit Margin)",maxWidth:"sm:w-80 w-72"},aa_totalCosts_prof:{title:"Total Costs (Ads)",text:"Sum of ad spend and the cost of goods/fees for items sold via ads.",formulaTitle:"Formula",formulaCode:"Ad Spend + Product & Etsy Fees (Ad Revenue)",maxWidth:"sm:w-80 w-72"},aa_netProfit_prof:{title:"Net Profit (from Ads)",text:"The final profit from advertising activities.",formulaTitle:"Formula",formulaCode:"Total Ad Revenue - Total Costs (Ads)",maxWidth:"sm:w-80 w-72"},aa_netProfitMargin_prof:{title:"Net Profit Margin (from Ads) (%)",text:"The percentage of ad revenue that is net profit.",formulaTitle:"Formula",formulaCode:"(Net Profit (Ads) / Ad Revenue) * 100%",maxWidth:"sm:w-80 w-72"},aa_profitStatus_prof:{title:"Profit Status",text:"Indicates whether your advertising is profitable, at break-even, or not profitable based on ROAS vs. Breakeven ROAS.",maxWidth:"sm:w-80 w-72"},aa_ROAS_prof:{title:"ROAS (Return on Ad Spend)",text:"Same as the KPI ROAS. Repeated here for context in profitability analysis.",formulaTitle:"Formula",formulaCode:"Total Ad Revenue / Total Ad Spend",maxWidth:"sm:w-80 w-72"},aa_breakevenROAS_prof:{title:"Breakeven ROAS",text:"The ROAS required to cover product costs and ad spend. If your ROAS is higher, you are profitable.",formulaTitle:"Formula",formulaCode:"1 / Average Product Profit Margin",maxWidth:"sm:w-80 w-72"},aa_ACOS_prof:{title:"ACOS (Advertising Cost of Sales) (%)",text:"Percentage of ad revenue spent on advertising. Lower is generally better.",formulaTitle:"Formula",formulaCode:"(Total Ad Spend / Total Ad Revenue) * 100%",maxWidth:"sm:w-80 w-72"},aa_breakevenACOS_prof:{title:"Breakeven ACOS (%)",text:"The ACOS at which you neither make nor lose money from ads. This is your Average Product Profit Margin.",formulaTitle:"Formula",formulaCode:"Average Product Profit Margin * 100%",maxWidth:"sm:w-80 w-72"},aa_adImpressions_eng:{title:"Ad Impressions (Views)",text:"Total times your ads were displayed.",maxWidth:"sm:w-80 w-72"},aa_adClicks_eng:{title:"Ad Clicks",text:"Total clicks your ads received.",maxWidth:"sm:w-80 w-72"},aa_CTR_eng:{title:"Click-Through Rate (CTR) (%)",text:"Percentage of impressions that resulted in a click.",formulaTitle:"Formula",formulaCode:"(Ad Clicks / Ad Impressions) * 100%",maxWidth:"sm:w-80 w-72"},aa_totalAdSpend_eng:{title:"Total Ad Spend",text:"Total cost of advertising.",maxWidth:"sm:w-80 w-72"},aa_CPC_eng:{title:"Cost Per Click (CPC)",text:"Average cost for each click on your ad.",formulaTitle:"Formula",formulaCode:"Total Ad Spend / Ad Clicks",maxWidth:"sm:w-80 w-72"},aa_CPM_eng:{title:"Cost Per Mille (CPM)",text:"Cost for one thousand ad impressions.",formulaTitle:"Formula",formulaCode:"(Total Ad Spend / Ad Impressions) * 1000",maxWidth:"sm:w-80 w-72"},aa_RPC_eng:{title:"Revenue Per Click (RPC)",text:"Average revenue generated per ad click.",formulaTitle:"Formula",formulaCode:"Total Ad Revenue / Ad Clicks",maxWidth:"sm:w-80 w-72"},aa_PPC_eng:{title:"Profit Per Click (PPC)",text:"Average net profit generated per ad click, after accounting for product costs and ad spend per click.",formulaTitle:"Formula",formulaCode:"(Ad Revenue per Click * Avg Profit Margin) - CPC",maxWidth:"sm:w-80 w-72"},aa_adOrders_eng:{title:"Orders from Ads",text:"Total orders generated from ads.",maxWidth:"sm:w-80 w-72"},aa_CVR_eng:{title:"Ad Conversion Rate (CVR) (%)",text:"Percentage of ad clicks that resulted in a sale.",formulaTitle:"Formula",formulaCode:"(Ad Orders / Ad Clicks) * 100%",maxWidth:"sm:w-80 w-72"},aa_AOV_eng:{title:"Average Order Value (AOV) from Ads",text:"Average revenue amount per ad order.",formulaTitle:"Formula",formulaCode:"Total Ad Revenue / Ad Orders",maxWidth:"sm:w-80 w-72"},aa_CPA_eng:{title:"Cost Per Acquisition (CPA)",text:"Average cost to acquire one order via ads.",formulaTitle:"Formula",formulaCode:"Total Ad Spend / Ad Orders",maxWidth:"sm:w-80 w-72"},aa_profitPerSale_eng:{title:"Profit Earned per Ad Sale",text:"Average net profit from each sale attributed to ads.",formulaTitle:"Formula",formulaCode:"(AOV from Ads * Avg. Profit Margin) - CPA",maxWidth:"sm:w-80 w-72"},co_blendedROAS_stat:{title:"Blended ROAS",text:"Overall return considering both ad revenue and total shop revenue against ad spend. This shows how ads contribute to overall shop efficiency.",formulaTitle:"Formula",formulaCode:"Total Shop Revenue / Total Ad Spend",maxWidth:"sm:w-80 w-72"},co_overallNetProfit_stat:{title:"Overall Shop Net Profit",text:"The total net profit of your shop, after accounting for all product costs, Etsy fees, and ad spend.",formulaTitle:"Formula",formulaCode:"(Total Shop Revenue * Avg. Profit Margin) - Total Ad Spend",maxWidth:"sm:w-80 w-72"},co_TACoS_stat:{title:"TACoS (Total Advertising Cost of Sales) (%)",text:"The percentage of your total shop revenue that was spent on advertising. This shows the ad spend impact on overall sales.",formulaTitle:"Formula",formulaCode:"(Total Ad Spend / Total Shop Revenue) * 100%",maxWidth:"sm:w-80 w-72"},co_percentRevenueFromAds:{title:"Revenue from Ads (%)",text:"The percentage of your total shop revenue that came directly from ads.",formulaTitle:"Formula",formulaCode:"(Total Ad Revenue / Total Shop Revenue) * 100%",maxWidth:"sm:w-80 w-72"},co_percentOrdersFromAds:{title:"Orders from Ads (%)",text:"The percentage of your total shop orders that came directly from ads.",formulaTitle:"Formula",formulaCode:"(Ad Orders / Total Shop Orders) * 100%",maxWidth:"sm:w-80 w-72"},co_combinedConversionRate:{title:"Conversion Rate (Organic vs. Ads)",text:"Comparison of conversion rates between your organic traffic and ad traffic. Organic CVR: (Organic Orders / Organic Visits) * 100%. Ad CVR: (Ad Orders / Ad Clicks) * 100%.",maxWidth:"sm:w-80 w-72"},co_combinedAOV:{title:"Average Order Value (Organic vs. Ads)",text:"Comparison of AOV between organic sales and ad-driven sales. Organic AOV: Organic Revenue / Organic Orders. Ad AOV: Ad Revenue / Ad Orders.",maxWidth:"sm:w-80 w-72"},co_adSpendToOverallGrossProfitRatio_percent:{title:"Ad Spend to Overall Gross Profit Ratio (%)",text:"The percentage of your total shop's gross profit (before ad spend) that is consumed by ad spend. Helps understand ad cost relative to overall profitability.",formulaTitle:"Formula",formulaCode:"(Ad Spend / (Shop Revenue * Avg. Profit Margin)) * 100%",maxWidth:"sm:w-80 w-72"}};function Be(){document.querySelectorAll("[data-tooltip-id]").forEach(a=>{const o=a.dataset.tooltipId,r=Ie[o];if(!r){console.warn(`Tooltip definition not found for ID: ${o}`);return}const n=r.maxWidth||"min-w-[260px] w-72 sm:w-80",d=document.createElement("div");d.className=`absolute bottom-full left-1/2 transform -translate-x-1/2 z-20 mb-2 ${n} bg-p-gray-950 text-p-base-white p-3 rounded-lg shadow-lg text-left invisible opacity-0 scale-95 translate-y-1 group-hover:visible group-hover:opacity-100 group-hover:scale-100 group-hover:translate-y-0 transition-all duration-300 ease-in-out pointer-events-none group-hover:pointer-events-auto min-w-[260px]`;let s="";if(r.title&&(s+=`<span class="block font-semibold text-p-base-white mb-1 text-xs">${r.title}</span>`),r.text){const i=r.formulaTitle?"mb-2":"";s+=`<span class="block text-p-base-white/80 text-xs leading-relaxed ${i}">${r.text}</span>`}r.formulaTitle&&r.formulaCode&&(s+=`
                    <span class="block font-medium text-p-base-white/60 text-xs mt-2 mb-0.5">${r.formulaTitle}</span>
                    <code class="block font-mono bg-p-base-white/[.08] text-p-base-white p-1.5 rounded text-xs whitespace-pre-wrap break-all">${r.formulaCode}</code>`),d.innerHTML=s;const l=document.createElement("div");l.className="absolute left-1/2 -translate-x-1/2 top-full w-0 h-0 border-x-[6px] border-x-transparent border-t-[6px] border-t-p-gray-950",d.appendChild(l),a.appendChild(d)})}function H(){const e=document.getElementById("performancePeriodDropdown")?.value||"last30",a=`https://www.etsy.com/your/shops/me/advertising?get_metrics=summary&period=${encodeURIComponent(e)}`,o=`https://www.etsy.com/your/shops/me/stats?get_metrics=summary&period=${encodeURIComponent(e)}`,r=document.getElementById("etsyAdsExternalLink"),n=document.getElementById("shopStatsExternalLink");r&&(r.href=a),n&&(n.href=o)}const j={views:["adImpressions"],clicks:["adClicks"],orders:["adOrders"],daily_budget:["dailyAdBudget"],revenue:["adv_totalAdRevenue_fromAds","totalAdRevenue_fromAds"],spend:["adv_totalAdSpend","totalAdSpend"],total_overall_shop_visits:["totalShopVisits"],total_overall_shop_orders:["totalOverallShopOrders"],total_overall_shop_revenue:["totalOverallShopRevenue"]};function G(e){for(const a in e)j[a]&&j[a].forEach(o=>{const r=document.getElementById(o);r&&(r.value=e[a],r.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})))})}function Ee(){const e=new URLSearchParams(window.location.search);if(e.toString()){const a=Object.fromEntries(e.entries());G(a)}}async function Z(e){e.preventDefault();const a=e.currentTarget,o=a.innerHTML,r='<svg class="w-4 h-4 mix-blend-multiply text-green-600" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',n='<svg class="w-4 h-4 mix-blend-multiply text-red-600" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';try{const d=await navigator.clipboard.readText();if(!d)throw new Error("Clipboard is empty.");const s=JSON.parse(d);G(s),a.innerHTML=r,setTimeout(()=>{a.innerHTML=o},2e3)}catch(d){console.error("Failed to import from clipboard:",d.message),a.innerHTML=n,setTimeout(()=>{a.innerHTML=o},2e3)}}function Me(){H();const e=document.getElementById("performancePeriodDropdown");e&&e.addEventListener("change",H),Ee();const a=document.getElementById("etsyAdsImport"),o=document.getElementById("shopStatsImport");a&&a.addEventListener("click",Z),o&&o.addEventListener("click",Z)}const K={totalAdSpend:"Total Ad Spend (Input)",totalAdRevenue_fromAds:"Total Ad Revenue from Ads (Input)",averageProductProfitMargin_percent:"Average Product Profit Margin % (Input)",adImpressions:"Ad Impressions/Views (Input)",adClicks:"Ad Clicks (Input)",adOrders:"Ad Orders (Input)",dailyAdBudget:"Daily Ad Budget (Input)",performancePeriod_days:"Performance Period (Days)",selectedPeriodString:"Selected Performance Period",currencyCode:"Currency Code",totalOverallShopRevenue:"Total Overall Shop Revenue (Input)",totalOverallShopOrders:"Total Overall Shop Orders (Input)",totalShopVisits:"Total Shop Visits (Input)",isAdvancedDataAvailable:"Is Advanced Data Available (Calculated Flag)",aa_performancePeriod:"Ad Analysis - Performance Period (Calculated Days)",aa_selectedPeriodString:"Ad Analysis - Selected Performance Period Name",aa_totalAdSpend_sum:"Ad Analysis - Total Ad Spend (Summary)",aa_totalAdRevenue_sum:"Ad Analysis - Total Ad Revenue (Summary)",aa_adOrders_sum:"Ad Analysis - Orders from Ads (Summary)",aa_netAdProfit_sum:"Ad Analysis - Net Ad Profit (Summary)",aa_ROAS_kpr:"Ad Analysis - ROAS (Key Performance Indicator)",aa_ACOS_kpr:"Ad Analysis - ACOS % (Key Performance Indicator)",aa_CVR_kpr:"Ad Analysis - Ad Conversion Rate % (Key Performance Indicator)",aa_CPA_kpr:"Ad Analysis - Cost Per Acquisition (Key Performance Indicator)",aa_totalAdRevenue_prof:"Ad Analysis - Total Ad Revenue (Profitability)",aa_totalAdSpend_prof:"Ad Analysis - Total Ad Spend (Profitability)",aa_COGS_prof:"Ad Analysis - Product & Etsy Fees (COGS for Ad Sales)",aa_totalCosts_prof:"Ad Analysis - Total Costs for Ads",aa_netProfit_prof:"Ad Analysis - Net Profit from Ads",aa_netProfitMargin_prof:"Ad Analysis - Net Profit Margin from Ads %",aa_profitStatus_prof:"Ad Analysis - Ad Profit Status",aa_ROAS_prof:"Ad Analysis - ROAS (Profitability)",aa_breakevenROAS_prof:"Ad Analysis - Breakeven ROAS",aa_ACOS_prof:"Ad Analysis - ACOS % (Profitability)",aa_breakevenACOS_prof:"Ad Analysis - Breakeven ACOS %",aa_adImpressions_eng:"Ad Analysis - Ad Impressions/Views (Engagement)",aa_adClicks_eng:"Ad Analysis - Ad Clicks (Engagement)",aa_CTR_eng:"Ad Analysis - Click-Through Rate (CTR) %",aa_totalAdSpend_eng:"Ad Analysis - Total Ad Spend (Engagement)",aa_CPC_eng:"Ad Analysis - Cost Per Click (CPC)",aa_CPM_eng:"Ad Analysis - Cost Per Mille (CPM)",aa_RPC_eng:"Ad Analysis - Revenue Per Click (RPC)",aa_PPC_eng:"Ad Analysis - Profit Per Click (PPC)",aa_adOrders_eng:"Ad Analysis - Orders from Ads (Engagement)",aa_CVR_eng:"Ad Analysis - Ad Conversion Rate % (Engagement)",aa_AOV_eng:"Ad Analysis - Average Order Value (AOV) from Ads",aa_CPA_eng:"Ad Analysis - Cost Per Acquisition (CPA - Engagement)",aa_profitPerSale_eng:"Ad Analysis - Profit Earned per Ad Sale",co_blendedROAS:"Comparison - Blended ROAS (Overall Shop Revenue / Total Ad Spend)",co_overallShopNetProfitLoss:"Comparison - Overall Shop Net Profit/Loss",co_TACoS_percent:"Comparison - Total Advertising Cost of Sales (TACoS) %",co_percentRevenueFromAds:"Comparison - Revenue from Ads % of Total Shop Revenue",co_percentOrdersFromAds:"Comparison - Orders from Ads % of Total Shop Orders",co_organicCVR_forOverview:"Comparison - Organic Conversion Rate % (Overview)",co_adCVR_forOverview:"Comparison - Ad Conversion Rate % (Overview)",co_organicAOV_forOverview:"Comparison - Organic Average Order Value (Overview)",co_adAOV_forOverview:"Comparison - Ad Average Order Value (Overview)",cdt_ad_visits:"Channel Deep Dive - Ad Channel Visits/Clicks",cdt_ad_orders:"Channel Deep Dive - Ad Channel Orders",cdt_ad_cvr:"Channel Deep Dive - Ad Channel Conversion Rate %",cdt_ad_revenue:"Channel Deep Dive - Ad Channel Revenue",cdt_ad_aov:"Channel Deep Dive - Ad Channel Average Order Value",cdt_ad_revenuePercent:"Channel Deep Dive - Ad Channel Revenue as % of Total",cdt_ad_ordersPercent:"Channel Deep Dive - Ad Channel Orders as % of Total",cdt_organic_visits:"Channel Deep Dive - Organic Channel Visits",cdt_organic_orders:"Channel Deep Dive - Organic Channel Orders",cdt_organic_cvr:"Channel Deep Dive - Organic Channel Conversion Rate %",cdt_organic_revenue:"Channel Deep Dive - Organic Channel Revenue",cdt_organic_aov:"Channel Deep Dive - Organic Channel Average Order Value",cdt_organic_revenuePercent:"Channel Deep Dive - Organic Channel Revenue as % of Total",cdt_organic_ordersPercent:"Channel Deep Dive - Organic Channel Orders as % of Total",cdt_total_visits:"Channel Deep Dive - Overall Shop Visits/Clicks",cdt_total_orders:"Channel Deep Dive - Overall Shop Orders",cdt_total_cvr:"Channel Deep Dive - Overall Shop Conversion Rate %",cdt_total_revenue:"Channel Deep Dive - Overall Shop Revenue",cdt_total_aov:"Channel Deep Dive - Overall Shop Average Order Value",m_budget_totalBudgetedForPeriod:"Budget - Total Budgeted For Period",m_budget_utilization_percent:"Budget - Budget Utilization %"};function Ve(){const e=te(),a=oe();let o=`Metric,Value\r
`;for(const i in e)if(Object.hasOwnProperty.call(e,i)){const c=K[i]||i.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase());let u=e[i];i==="selectedPeriodString"||i==="currencyCode"?u=`"${String(u).replace(/"/g,'""')}"`:typeof u=="boolean"?u=u?"Yes":"No":typeof u=="number"?i.toLowerCase().includes("_percent")?u=_(u,!0):i.toLowerCase().includes("spend")||i.toLowerCase().includes("revenue")||i.toLowerCase().includes("budget")||i.toLowerCase().includes("aov")?u=g(u,e.currencyCode,!1,!0):u=m(u,2,!0):u=`"${String(u).replace(/"/g,'""')}"`,o+=`"${c.replace(/"/g,'""')}",${u}\r
`}for(const i in a)if(Object.hasOwnProperty.call(a,i)){const c=K[i]||i.replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase()),u=a[i];let p=u;typeof u=="number"?i.toLowerCase().includes("percent")||i.toLowerCase().includes("cvr")||i.toLowerCase().includes("acos")||i.toLowerCase().includes("ctr")||i==="m_budget_utilization_percent"?p=_(u,!0):i.toLowerCase().includes("spend")||i.toLowerCase().includes("revenue")||i.toLowerCase().includes("profit")||i.toLowerCase().includes("cpc")||i.toLowerCase().includes("cpm")||i.toLowerCase().includes("rpc")||i.toLowerCase().includes("ppc")||i.toLowerCase().includes("aov")||i.toLowerCase().includes("cpa")||i==="m_budget_totalBudgetedForPeriod"?p=g(u,e.currencyCode,!1,!0):i.toLowerCase().includes("roas")?p=m(u,2,!0):i==="aa_performancePeriod"?p=v(u,!0):p=m(u,2,!0):typeof u=="string"&&(p=`"${u.replace(/"/g,'""')}"`),o+=`"${c.replace(/"/g,'""')}",${p}\r
`}const r=encodeURI(o),n=document.createElement("a");n.setAttribute("href",r);const l=`etsy_ads_performance_export_${new Date().toISOString().replace(/[:.]/g,"-")}.csv`;n.setAttribute("download",l),document.body.appendChild(n),n.click(),document.body.removeChild(n)}function J(){console.log("Logger: initializeApp() called."),console.log("Logger: DOM elements cached."),Be(),Me(),console.log("Logger: UI components initialized."),console.log("Logger: Attaching event listeners..."),[t.totalAdSpend,t.totalAdRevenue_fromAds,t.averageProductProfitMargin_percent,t.adv_totalAdSpend,t.adv_totalAdRevenue_fromAds,t.adv_averageProductProfitMargin_percent,t.adImpressions,t.adClicks,t.adOrders,t.dailyAdBudget,t.performancePeriodDropdown,t.currencySymbol,t.totalOverallShopRevenue,t.totalOverallShopOrders,t.totalShopVisits].forEach(a=>{a&&(a.addEventListener("input",q),a.tagName==="SELECT"&&a.addEventListener("change",q))}),console.log("Logger: Event listeners attached."),t.toggleNormalViewButton&&t.toggleNormalViewButton.addEventListener("click",()=>x("normal")),t.toggleAdvancedViewButton&&t.toggleAdvancedViewButton.addEventListener("click",()=>x("advanced")),t.adAnalysisTabButtons&&t.adAnalysisTabButtons.forEach(a=>{a.addEventListener("click",()=>k(a,t.adAnalysisTabButtons,t.adAnalysisTabContents))}),t.comparisonMetricsTabButtons&&t.comparisonMetricsTabButtons.forEach(a=>{a.addEventListener("click",()=>k(a,t.comparisonMetricsTabButtons,t.comparisonMetricsTabContents))}),t.exportCsvButton&&t.exportCsvButton.addEventListener("click",Ve),me(),console.log("Logger: Input sync initialized."),console.log("Logger: Setting initial view to 'normal'."),x("normal"),t.adAnalysisTabButtons&&t.adAnalysisTabButtons.length>0&&k(t.adAnalysisTabButtons[0],t.adAnalysisTabButtons,t.adAnalysisTabContents),t.comparisonMetricsTabButtons&&t.comparisonMetricsTabButtons.length>0&&k(t.comparisonMetricsTabButtons[0],t.comparisonMetricsTabButtons,t.comparisonMetricsTabContents),console.log("Logger: initializeApp() finished.")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",J):J()})();
